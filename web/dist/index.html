<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Patina Chat</title>
    <script type="module" crossorigin>var wi=Object.defineProperty;var xi=(t,e,n)=>e in t?wi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var A=(t,e,n)=>xi(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var rt,T,bn,wn,oe,Jt,xn,Sn,$n,Rt,_t,gt,Ve={},Ke=[],Si=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,st=Array.isArray;function K(t,e){for(var n in e)t[n]=e[n];return t}function Pt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function $i(t,e,n){var i,r,s,c={};for(s in e)s=="key"?i=e[s]:s=="ref"?r=e[s]:c[s]=e[s];if(arguments.length>2&&(c.children=arguments.length>3?rt.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)c[s]===void 0&&(c[s]=t.defaultProps[s]);return Fe(t,c,i,r,null)}function Fe(t,e,n,i,r){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++bn,__i:-1,__u:0};return r==null&&T.vnode!=null&&T.vnode(s),s}function ae(t){return t.children}function Ce(t,e){this.props=t,this.context=e}function ge(t,e){if(e==null)return t.__?ge(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?ge(t):null}function Ti(t){if(t.__P&&t.__d){var e=t.__v,n=e.__e,i=[],r=[],s=K({},e);s.__v=e.__v+1,T.vnode&&T.vnode(s),Lt(t.__P,s,e,t.__n,t.__P.namespaceURI,32&e.__u?[n]:null,i,n??ge(e),!!(32&e.__u),r),s.__v=e.__v,s.__.__k[s.__i]=s,An(i,s,r),e.__e=e.__=null,s.__e!=n&&Tn(s)}}function Tn(t){if((t=t.__)!=null&&t.__c!=null)return t.__e=t.__c.base=null,t.__k.some(function(e){if(e!=null&&e.__e!=null)return t.__e=t.__c.base=e.__e}),Tn(t)}function Qt(t){(!t.__d&&(t.__d=!0)&&oe.push(t)&&!Je.__r++||Jt!=T.debounceRendering)&&((Jt=T.debounceRendering)||xn)(Je)}function Je(){for(var t,e=1;oe.length;)oe.length>e&&oe.sort(Sn),t=oe.shift(),e=oe.length,Ti(t);Je.__r=0}function Cn(t,e,n,i,r,s,c,a,d,o,h){var u,p,f,g,_,m,k,y=i&&i.__k||Ke,D=e.length;for(d=Ci(n,e,y,d,D),u=0;u<D;u++)(f=n.__k[u])!=null&&(p=f.__i!=-1&&y[f.__i]||Ve,f.__i=u,m=Lt(t,f,p,r,s,c,a,d,o,h),g=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&Dt(p.ref,null,f),h.push(f.ref,f.__c||g,f)),_==null&&g!=null&&(_=g),(k=!!(4&f.__u))||p.__k===f.__k?d=In(f,d,t,k):typeof f.type=="function"&&m!==void 0?d=m:g&&(d=g.nextSibling),f.__u&=-7);return n.__e=_,d}function Ci(t,e,n,i,r){var s,c,a,d,o,h=n.length,u=h,p=0;for(t.__k=new Array(r),s=0;s<r;s++)(c=e[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?c=t.__k[s]=Fe(null,c,null,null,null):st(c)?c=t.__k[s]=Fe(ae,{children:c},null,null,null):c.constructor===void 0&&c.__b>0?c=t.__k[s]=Fe(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):t.__k[s]=c,d=s+p,c.__=t,c.__b=t.__b+1,a=null,(o=c.__i=Ii(c,n,d,u))!=-1&&(u--,(a=n[o])&&(a.__u|=2)),a==null||a.__v==null?(o==-1&&(r>h?p--:r<h&&p++),typeof c.type!="function"&&(c.__u|=4)):o!=d&&(o==d-1?p--:o==d+1?p++:(o>d?p--:p++,c.__u|=4))):t.__k[s]=null;if(u)for(s=0;s<h;s++)(a=n[s])!=null&&(2&a.__u)==0&&(a.__e==i&&(i=ge(a)),Pn(a,a));return i}function In(t,e,n,i){var r,s;if(typeof t.type=="function"){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=In(r[s],e,n,i));return e}t.__e!=e&&(i&&(e&&t.type&&!e.parentNode&&(e=ge(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Ii(t,e,n,i){var r,s,c,a=t.key,d=t.type,o=e[n],h=o!=null&&(2&o.__u)==0;if(o===null&&a==null||h&&a==o.key&&d==o.type)return n;if(i>(h?1:0)){for(r=n-1,s=n+1;r>=0||s<e.length;)if((o=e[c=r>=0?r--:s++])!=null&&(2&o.__u)==0&&a==o.key&&d==o.type)return c}return-1}function Xt(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Si.test(e)?n:n+"px"}function Ne(t,e,n,i,r){var s,c;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||Xt(t.style,e,"");if(n)for(e in n)i&&n[e]==i[e]||Xt(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace($n,"$1")),c=e.toLowerCase(),e=c in t||e=="onFocusOut"||e=="onFocusIn"?c.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i?n.u=i.u:(n.u=Rt,t.addEventListener(e,s?gt:_t,s)):t.removeEventListener(e,s?gt:_t,s);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Yt(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=Rt++;else if(e.t<n.u)return;return n(T.event?T.event(e):e)}}}function Lt(t,e,n,i,r,s,c,a,d,o){var h,u,p,f,g,_,m,k,y,D,v,R,P,z,Z,j=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(d=!!(32&n.__u),s=[a=e.__e=n.__e]),(h=T.__b)&&h(e);e:if(typeof j=="function")try{if(k=e.props,y="prototype"in j&&j.prototype.render,D=(h=j.contextType)&&i[h.__c],v=h?D?D.props.value:h.__:i,n.__c?m=(u=e.__c=n.__c).__=u.__E:(y?e.__c=u=new j(k,v):(e.__c=u=new Ce(k,v),u.constructor=j,u.render=Ri),D&&D.sub(u),u.state||(u.state={}),u.__n=i,p=u.__d=!0,u.__h=[],u._sb=[]),y&&u.__s==null&&(u.__s=u.state),y&&j.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=K({},u.__s)),K(u.__s,j.getDerivedStateFromProps(k,u.__s))),f=u.props,g=u.state,u.__v=e,p)y&&j.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),y&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(y&&j.getDerivedStateFromProps==null&&k!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(k,v),e.__v==n.__v||!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(k,u.__s,v)===!1){e.__v!=n.__v&&(u.props=k,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(Y){Y&&(Y.__=e)}),Ke.push.apply(u.__h,u._sb),u._sb=[],u.__h.length&&c.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(k,u.__s,v),y&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,g,_)})}if(u.context=v,u.props=k,u.__P=t,u.__e=!1,R=T.__r,P=0,y)u.state=u.__s,u.__d=!1,R&&R(e),h=u.render(u.props,u.state,u.context),Ke.push.apply(u.__h,u._sb),u._sb=[];else do u.__d=!1,R&&R(e),h=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++P<25);u.state=u.__s,u.getChildContext!=null&&(i=K(K({},i),u.getChildContext())),y&&!p&&u.getSnapshotBeforeUpdate!=null&&(_=u.getSnapshotBeforeUpdate(f,g)),z=h!=null&&h.type===ae&&h.key==null?Rn(h.props.children):h,a=Cn(t,st(z)?z:[z],e,n,i,r,s,c,a,d,o),u.base=e.__e,e.__u&=-161,u.__h.length&&c.push(u),m&&(u.__E=u.__=null)}catch(Y){if(e.__v=null,d||s!=null)if(Y.then){for(e.__u|=d?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else{for(Z=s.length;Z--;)Pt(s[Z]);vt(e)}else e.__e=n.__e,e.__k=n.__k,Y.then||vt(e);T.__e(Y,e,n)}else s==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):a=e.__e=Ai(n.__e,e,n,i,r,s,c,d,o);return(h=T.diffed)&&h(e),128&e.__u?void 0:a}function vt(t){t&&(t.__c&&(t.__c.__e=!0),t.__k&&t.__k.some(vt))}function An(t,e,n){for(var i=0;i<n.length;i++)Dt(n[i],n[++i],n[++i]);T.__c&&T.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(s){s.call(r)})}catch(s){T.__e(s,r.__v)}})}function Rn(t){return typeof t!="object"||t==null||t.__b>0?t:st(t)?t.map(Rn):K({},t)}function Ai(t,e,n,i,r,s,c,a,d){var o,h,u,p,f,g,_,m=n.props||Ve,k=e.props,y=e.type;if(y=="svg"?r="http://www.w3.org/2000/svg":y=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(o=0;o<s.length;o++)if((f=s[o])&&"setAttribute"in f==!!y&&(y?f.localName==y:f.nodeType==3)){t=f,s[o]=null;break}}if(t==null){if(y==null)return document.createTextNode(k);t=document.createElementNS(r,y,k.is&&k),a&&(T.__m&&T.__m(e,s),a=!1),s=null}if(y==null)m===k||a&&t.data==k||(t.data=k);else{if(s=s&&rt.call(t.childNodes),!a&&s!=null)for(m={},o=0;o<t.attributes.length;o++)m[(f=t.attributes[o]).name]=f.value;for(o in m)f=m[o],o=="dangerouslySetInnerHTML"?u=f:o=="children"||o in k||o=="value"&&"defaultValue"in k||o=="checked"&&"defaultChecked"in k||Ne(t,o,null,f,r);for(o in k)f=k[o],o=="children"?p=f:o=="dangerouslySetInnerHTML"?h=f:o=="value"?g=f:o=="checked"?_=f:a&&typeof f!="function"||m[o]===f||Ne(t,o,f,m[o],r);if(h)a||u&&(h.__html==u.__html||h.__html==t.innerHTML)||(t.innerHTML=h.__html),e.__k=[];else if(u&&(t.innerHTML=""),Cn(e.type=="template"?t.content:t,st(p)?p:[p],e,n,i,y=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&ge(n,0),a,d),s!=null)for(o=s.length;o--;)Pt(s[o]);a||(o="value",y=="progress"&&g==null?t.removeAttribute("value"):g!=null&&(g!==t[o]||y=="progress"&&!g||y=="option"&&g!=m[o])&&Ne(t,o,g,m[o],r),o="checked",_!=null&&_!=t[o]&&Ne(t,o,_,m[o],r))}return t}function Dt(t,e,n){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(r){T.__e(r,n)}}function Pn(t,e,n){var i,r;if(T.unmount&&T.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||Dt(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){T.__e(s,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&Pn(i[r],e,n||typeof t.type!="function");n||Pt(t.__e),t.__c=t.__=t.__e=void 0}function Ri(t,e,n){return this.constructor(t,n)}function Pi(t,e,n){var i,r,s,c;e==document&&(e=document.documentElement),T.__&&T.__(t,e),r=(i=!1)?null:e.__k,s=[],c=[],Lt(e,t=e.__k=$i(ae,null,[t]),r||Ve,Ve,e.namespaceURI,r?null:e.firstChild?rt.call(e.childNodes):null,s,r?r.__e:e.firstChild,i,c),An(s,t,c)}rt=Ke.slice,T={__e:function(t,e,n,i){for(var r,s,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},bn=0,wn=function(t){return t!=null&&t.constructor===void 0},Ce.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=K({},this.state),typeof t=="function"&&(t=t(K({},n),this.props)),t&&K(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Qt(this))},Ce.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Qt(this))},Ce.prototype.render=ae,oe=[],xn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Sn=function(t,e){return t.__v.__b-e.__v.__b},Je.__r=0,$n=/(PointerCapture)$|Capture$/i,Rt=0,_t=Yt(!1),gt=Yt(!0);var Li=0;function l(t,e,n,i,r,s){e||(e={});var c,a,d=e;if("ref"in d)for(a in d={},e)a=="ref"?c=e[a]:d[a]=e[a];var o={type:t,props:d,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Li,__i:-1,__u:0,__source:r,__self:s};if(typeof t=="function"&&(c=t.defaultProps))for(a in c)d[a]===void 0&&(d[a]=c[a]);return T.vnode&&T.vnode(o),o}var De,M,ht,en,Qe=0,Ln=[],B=T,tn=B.__b,nn=B.__r,rn=B.diffed,sn=B.__c,on=B.unmount,an=B.__;function Et(t,e){B.__h&&B.__h(M,t,Qe||e),Qe=0;var n=M.__H||(M.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function x(t){return Qe=1,Di(En,t)}function Di(t,e,n){var i=Et(De++,2);if(i.t=t,!i.__c&&(i.__=[En(void 0,e),function(a){var d=i.__N?i.__N[0]:i.__[0],o=i.t(d,a);d!==o&&(i.__N=[o,i.__[1]],i.__c.setState({}))}],i.__c=M,!M.__f)){var r=function(a,d,o){if(!i.__c.__H)return!0;var h=i.__c.__H.__.filter(function(p){return p.__c});if(h.every(function(p){return!p.__N}))return!s||s.call(this,a,d,o);var u=i.__c.props!==a;return h.some(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(u=!0)}}),s&&s.call(this,a,d,o)||u};M.__f=!0;var s=M.shouldComponentUpdate,c=M.componentWillUpdate;M.componentWillUpdate=function(a,d,o){if(this.__e){var h=s;s=void 0,r(a,d,o),s=h}c&&c.call(this,a,d,o)},M.shouldComponentUpdate=r}return i.__N||i.__}function ne(t,e){var n=Et(De++,3);!B.__s&&Dn(n.__H,e)&&(n.__=t,n.u=e,M.__H.__h.push(n))}function pe(t){return Qe=5,Mt(function(){return{current:t}},[])}function Mt(t,e){var n=Et(De++,7);return Dn(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Ei(){for(var t;t=Ln.shift();){var e=t.__H;if(t.__P&&e)try{e.__h.some(Ze),e.__h.some(mt),e.__h=[]}catch(n){e.__h=[],B.__e(n,t.__v)}}}B.__b=function(t){M=null,tn&&tn(t)},B.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),an&&an(t,e)},B.__r=function(t){nn&&nn(t),De=0;var e=(M=t.__c).__H;e&&(ht===M?(e.__h=[],M.__h=[],e.__.some(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.some(Ze),e.__h.some(mt),e.__h=[],De=0)),ht=M},B.diffed=function(t){rn&&rn(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ln.push(e)!==1&&en===B.requestAnimationFrame||((en=B.requestAnimationFrame)||Mi)(Ei)),e.__H.__.some(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ht=M=null},B.__c=function(t,e){e.some(function(n){try{n.__h.some(Ze),n.__h=n.__h.filter(function(i){return!i.__||mt(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],B.__e(i,n.__v)}}),sn&&sn(t,e)},B.unmount=function(t){on&&on(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.some(function(i){try{Ze(i)}catch(r){e=r}}),n.__H=void 0,e&&B.__e(e,n.__v))};var ln=typeof requestAnimationFrame=="function";function Mi(t){var e,n=function(){clearTimeout(i),ln&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,35);ln&&(e=requestAnimationFrame(n))}function Ze(t){var e=M,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),M=e}function mt(t){var e=M;t.__c=t.__(),M=e}function Dn(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function En(t,e){return typeof e=="function"?e(t):e}var Bi=Symbol.for("preact-signals");function ot(){if(ee>1)ee--;else{for(var t,e=!1;Ie!==void 0;){var n=Ie;for(Ie=void 0,yt++;n!==void 0;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&zn(n))try{n.c()}catch(r){e||(t=r,e=!0)}n=i}}if(yt=0,ee--,e)throw t}}function zi(t){if(ee>0)return t();ee++;try{return t()}finally{ot()}}var S=void 0;function Mn(t){var e=S;S=void 0;try{return t()}finally{S=e}}var Ie=void 0,ee=0,yt=0,Xe=0;function Bn(t){if(S!==void 0){var e=t.n;if(e===void 0||e.t!==S)return e={i:0,S:t,p:S.s,n:void 0,t:S,e:void 0,x:void 0,r:e},S.s!==void 0&&(S.s.n=e),S.s=e,t.n=e,32&S.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=S.s,e.n=void 0,S.s.n=e,S.s=e),e}}function N(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}N.prototype.brand=Bi;N.prototype.h=function(){return!0};N.prototype.S=function(t){var e=this,n=this.t;n!==t&&t.e===void 0&&(t.x=n,this.t=t,n!==void 0?n.e=t:Mn(function(){var i;(i=e.W)==null||i.call(e)}))};N.prototype.U=function(t){var e=this;if(this.t!==void 0){var n=t.e,i=t.x;n!==void 0&&(n.x=i,t.e=void 0),i!==void 0&&(i.e=n,t.x=void 0),t===this.t&&(this.t=i,i===void 0&&Mn(function(){var r;(r=e.Z)==null||r.call(e)}))}};N.prototype.subscribe=function(t){var e=this;return Me(function(){var n=e.value,i=S;S=void 0;try{t(n)}finally{S=i}},{name:"sub"})};N.prototype.valueOf=function(){return this.value};N.prototype.toString=function(){return this.value+""};N.prototype.toJSON=function(){return this.value};N.prototype.peek=function(){var t=S;S=void 0;try{return this.value}finally{S=t}};Object.defineProperty(N.prototype,"value",{get:function(){var t=Bn(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(yt>100)throw new Error("Cycle detected");this.v=t,this.i++,Xe++,ee++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{ot()}}}});function I(t,e){return new N(t,e)}function zn(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function Nn(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function On(t){for(var e=t.s,n=void 0;e!==void 0;){var i=e.p;e.i===-1?(e.S.U(e),i!==void 0&&(i.n=e.n),e.n!==void 0&&(e.n.p=i)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=i}t.s=n}function he(t,e){N.call(this,void 0),this.x=t,this.s=void 0,this.g=Xe-1,this.f=4,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}he.prototype=new N;he.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Xe))return!0;if(this.g=Xe,this.f|=1,this.i>0&&!zn(this))return this.f&=-2,!0;var t=S;try{Nn(this),S=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return S=t,On(this),this.f&=-2,!0};he.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}N.prototype.S.call(this,t)};he.prototype.U=function(t){if(this.t!==void 0&&(N.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};he.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(he.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=Bn(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function cn(t,e){return new he(t,e)}function Hn(t){var e=t.u;if(t.u=void 0,typeof e=="function"){ee++;var n=S;S=void 0;try{e()}catch(i){throw t.f&=-2,t.f|=8,Bt(t),i}finally{S=n,ot()}}}function Bt(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,Hn(t)}function Ni(t){if(S!==this)throw new Error("Out-of-order effect");On(this),S=t,this.f&=-2,8&this.f&&Bt(this),ot()}function me(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=e==null?void 0:e.name}me.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};me.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Hn(this),Nn(this),ee++;var t=S;return S=this,Ni.bind(this,t)};me.prototype.N=function(){2&this.f||(this.f|=2,this.o=Ie,Ie=this)};me.prototype.d=function(){this.f|=8,1&this.f||Bt(this)};me.prototype.dispose=function(){this.d()};function Me(t,e){var n=new me(t,e);try{n.c()}catch(r){throw n.d(),r}var i=n.d.bind(n);return i[Symbol.dispose]=i,i}var Un,Oe,Oi=typeof window<"u"&&!!window.__PREACT_SIGNALS_DEVTOOLS__,jn=[];Me(function(){Un=this.N})();function ye(t,e){T[t]=e.bind(null,T[t]||function(){})}function Ye(t){if(Oe){var e=Oe;Oe=void 0,e()}Oe=t&&t.S()}function qn(t){var e=this,n=t.data,i=Ui(n);i.value=n;var r=Mt(function(){for(var a=e,d=e.__v;d=d.__;)if(d.__c){d.__c.__$f|=4;break}var o=cn(function(){var f=i.value.value;return f===0?0:f===!0?"":f||""}),h=cn(function(){return!Array.isArray(o.value)&&!wn(o.value)}),u=Me(function(){if(this.N=Fn,h.value){var f=o.value;a.__v&&a.__v.__e&&a.__v.__e.nodeType===3&&(a.__v.__e.data=f)}}),p=e.__$u.d;return e.__$u.d=function(){u(),p.call(this)},[h,o]},[]),s=r[0],c=r[1];return s.value?c.peek():c.value}qn.displayName="ReactiveTextNode";Object.defineProperties(N.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:qn},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});ye("__b",function(t,e){if(typeof e.type=="string"){var n,i=e.props;for(var r in i)if(r!=="children"){var s=i[r];s instanceof N&&(n||(e.__np=n={}),n[r]=s,i[r]=s.peek())}}t(e)});ye("__r",function(t,e){if(t(e),e.type!==ae){Ye();var n,i=e.__c;i&&(i.__$f&=-2,(n=i.__$u)===void 0&&(i.__$u=n=(function(r,s){var c;return Me(function(){c=this},{name:s}),c.c=r,c})(function(){var r;Oi&&((r=n.y)==null||r.call(n)),i.__$f|=1,i.setState({})},typeof e.type=="function"?e.type.displayName||e.type.name:""))),Ye(n)}});ye("__e",function(t,e,n,i){Ye(),t(e,n,i)});ye("diffed",function(t,e){Ye();var n;if(typeof e.type=="string"&&(n=e.__e)){var i=e.__np,r=e.props;if(i){var s=n.U;if(s)for(var c in s){var a=s[c];a!==void 0&&!(c in i)&&(a.d(),s[c]=void 0)}else s={},n.U=s;for(var d in i){var o=s[d],h=i[d];o===void 0?(o=Hi(n,d,h),s[d]=o):o.o(h,r)}for(var u in i)r[u]=i[u]}}t(e)});function Hi(t,e,n,i){var r=e in t&&t.ownerSVGElement===void 0,s=I(n),c=n.peek();return{o:function(a,d){s.value=a,c=a.peek()},d:Me(function(){this.N=Fn;var a=s.value.value;c!==a?(c=void 0,r?t[e]=a:a!=null&&(a!==!1||e[4]==="-")?t.setAttribute(e,a):t.removeAttribute(e)):c=void 0})}}ye("unmount",function(t,e){if(typeof e.type=="string"){var n=e.__e;if(n){var i=n.U;if(i){n.U=void 0;for(var r in i){var s=i[r];s&&s.d()}}}e.__np=void 0}else{var c=e.__c;if(c){var a=c.__$u;a&&(c.__$u=void 0,a.d())}}t(e)});ye("__h",function(t,e,n,i){(i<3||i===9)&&(e.__$f|=2),t(e,n,i)});Ce.prototype.shouldComponentUpdate=function(t,e){if(this.__R)return!0;var n=this.__$u,i=n&&n.s!==void 0;for(var r in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var s=2&this.__$f;if(!(i||s||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var c in t)if(c!=="__source"&&t[c]!==this.props[c])return!0;for(var a in this.props)if(!(a in t))return!0;return!1};function Ui(t,e){return Mt(function(){return I(t,e)},[])}var ji=function(t){queueMicrotask(function(){queueMicrotask(t)})};function qi(){zi(function(){for(var t;t=jn.shift();)Un.call(t)})}function Fn(){jn.push(this)===1&&(T.requestAnimationFrame||ji)(qi)}const Fi=["chats","tasks","usage"];function Zn(){const t=window.location.hash.replace(/^#\/?/,"");return Fi.includes(t)?t:"chats"}const zt=I(Zn());function Zi(t){window.location.hash=`/${t}`}window.addEventListener("hashchange",()=>{zt.value=Zn()});function Wn(t){const e=Object.entries(t).filter(([,n])=>n).map(([n,i])=>`${encodeURIComponent(n)}=${encodeURIComponent(i)}`);return e.length?`?${e.join("&")}`:""}async function Wi(){return(await fetch("/api/sessions")).json()}async function Gi(){try{return await(await fetch("/api/personas")).json()}catch{return[]}}async function Vi(t){const e=await fetch("/api/personas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){const n=await e.json();throw new Error(n.error)}return e.json()}async function Ki(t,e){const n=await fetch(`/api/personas/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const i=await n.json();throw new Error(i.error)}return n.json()}async function Ji(t){const e=await fetch(`/api/personas/${encodeURIComponent(t)}`,{method:"DELETE"});if(!e.ok){const n=await e.json();throw new Error(n.error)}}async function Qi(t){return(await fetch("/api/personas/generate-prompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}async function Xi(){try{return await(await fetch("/api/model-tiers")).json()}catch{return["default"]}}async function Yi(t){return(await fetch(`/api/usage/summary${Wn(t)}`)).json()}async function $e(t){return(await fetch(`/api/usage/daily${Wn(t)}`)).json()}async function er(){return(await fetch("/api/usage/filters")).json()}async function tr(){return(await fetch("/api/tasks")).json()}async function nr(t){return(await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}async function Gn(t,e){await fetch(`/api/tasks/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function Vn(t){await fetch(`/api/tasks/${t}`,{method:"DELETE"})}async function Kn(t,e){await fetch(`/api/tasks/${t}/move`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})})}async function Jn(t,e){await fetch(`/api/tasks/${t}/assign`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignee:e})})}const L=I([]),F=I(null),le=I({}),Qn="patina-sessions";function ir(){const t=localStorage.getItem("patina-session"),e=localStorage.getItem(Qn);if(e)try{L.value=JSON.parse(e)}catch{L.value=[]}else t&&(L.value=[{id:t,title:"Chat",updatedAt:new Date().toISOString()}],localStorage.removeItem("patina-session"));ke()}function ke(){localStorage.setItem(Qn,JSON.stringify(L.value))}function at(t){return L.value.find(e=>e.id===t)||null}function Xn(t){L.value=[t,...L.value],ke()}function Yn(t){L.value=L.value.filter(n=>n.id!==t);const e={...le.value};delete e[t],le.value=e,ke()}function ei(t,e){const n=at(t);n&&n.title==="New Chat"&&(n.title=e.length>50?e.substring(0,50)+"...":e,L.value=[...L.value],ke())}function kt(t){const e=at(t);e&&(e.updatedAt=new Date().toISOString(),L.value=[...L.value],ke())}function un(t){le.value={...le.value,[t]:!0}}function rr(t){const e={...le.value};delete e[t],le.value=e}function ti(t){const e=at(t);return(e==null?void 0:e.persona)||null}function sr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}async function or(){try{const t=await Wi(),e={},n=L.value;for(const i of t){e[i.key]=!0;const r=n.find(s=>s.id===i.key);r?(i.title&&i.title!==r.title&&(r.title=i.title),i.persona&&(r.persona=i.persona)):n.push({id:i.key,title:i.title||i.key.slice(0,8),updatedAt:i.updated_at||new Date().toISOString(),persona:i.persona||null})}L.value=[...n],ke()}catch{}}const ce=I([]),Be=I(""),be=I(!1),_e=I(!1),ie=I(!1);function We(t,e){ce.value=[...ce.value,{role:t,content:e}]}function Ae(){ce.value=[],Be.value="",be.value=!1,ie.value=!1}function ar(t){ce.value=t}function lr(){be.value=!0,Be.value="",ie.value=!1}function cr(t){be.value||lr(),ie.value=!1,Be.value+=t}function ur(t){be.value=!1,Be.value="",_e.value=!1,ce.value=[...ce.value,{role:"assistant",content:t}]}const fe=I("disconnected"),Te=I("disconnected");let q=null,He=1e3;const bt=I(null),W=I([]),et=I(""),Re=I(!1);function te(t){q&&q.readyState===WebSocket.OPEN&&q.send(JSON.stringify(t))}function Nt(){if(q)return;fe.value="reconnecting",Te.value="connecting...";let e=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws`;const n=localStorage.getItem("patina-password");n&&(e+=`?password=${encodeURIComponent(n)}`),q=new WebSocket(e),q.onopen=()=>{fe.value="connected",Te.value="connected",He=1e3;const i=F.value;i&&te({type:"get_history",chatId:i})},q.onmessage=i=>{let r;try{r=JSON.parse(i.data)}catch{return}hr(r)},q.onclose=i=>{if(q=null,ie.value=!1,i.code===4001){fe.value="disconnected",Te.value="auth failed",ni();return}fe.value="disconnected",Te.value="disconnected",setTimeout(Nt,He),He=Math.min(He*2,3e4)},q.onerror=()=>{}}function hr(t){var i,r;const e=F.value,n=bt.value;switch(t.type){case"connected":break;case"history":t.chatId===e&&((i=t.messages)!=null&&i.length)&&(Ae(),ar(t.messages));break;case"text_delta":t.chatId===n&&t.content?(Re.value=!0,et.value+=t.content):t.chatId===e&&t.content&&cr(t.content);break;case"message":if(t.chatId===n){Re.value?(Re.value=!1,W.value=[...W.value,{role:"assistant",content:t.content}],et.value=""):W.value=[...W.value,{role:"assistant",content:t.content}];break}_e.value=!1,t.chatId===e?be.value?ur(t.content):We("assistant",t.content):t.chatId&&un(t.chatId),t.chatId&&kt(t.chatId);break;case"user_message":t.chatId===n?W.value=[...W.value,{role:"user",content:t.content}]:t.chatId===e&&We("user",t.content),t.chatId&&(ei(t.chatId,t.content),kt(t.chatId),t.chatId!==e&&un(t.chatId));break;case"thinking":t.chatId===n||t.chatId===e&&(ie.value=!0);break;case"session_created":t.chatId&&!at(t.chatId)&&Xn({id:t.chatId,title:"New Chat",updatedAt:t.timestamp||new Date().toISOString(),persona:t.content||null});break;case"session_deleted":t.chatId&&(Yn(t.chatId),t.chatId===e&&(L.value.length>0?F.value=L.value[0].id:(F.value=null,Ae())));break;case"task_history":t.chatId===n&&(W.value=t.messages||[]);break;case"error":(r=t.content)!=null&&r.includes("Authentication")&&ni(),We("system",t.content||"Unknown error");break}}function ni(){const t=prompt("Enter password:");t!==null&&(localStorage.setItem("patina-password",t),q&&(q.close(),q=null),Nt())}const dr="_header_ps8v4_1",pr="_hamburger_ps8v4_12",fr="_brand_ps8v4_23",_r="_nav_ps8v4_30",gr="_navTab_ps8v4_36",vr="_navTabActive_ps8v4_55 _navTab_ps8v4_36",mr="_actions_ps8v4_61",re={header:dr,hamburger:pr,brand:fr,nav:_r,navTab:gr,navTabActive:vr,actions:mr},yr=[{key:"chats",label:"Chats"},{key:"tasks",label:"Tasks"},{key:"usage",label:"Usage"}];function kr({onToggleSidebar:t,showSidebarToggle:e,children:n}){const i=zt.value,r=fe.value,s=Te.value;return l("header",{class:re.header,children:[e&&l("button",{class:re.hamburger,title:"Toggle sidebar",onClick:t,children:"☰"}),l("span",{class:re.brand,children:"Patina"}),l("nav",{class:re.nav,children:yr.map(c=>l("button",{class:c.key===i?re.navTabActive:re.navTab,onClick:()=>Zi(c.key),children:c.label},c.key))}),n&&l("div",{class:re.actions,children:n}),l("span",{class:`status ${r}`,children:s})]})}const X=I([]),ii=I(["default"]);async function Ot(){X.value=await Gi()}async function br(){ii.value=await Xi()}function wr(t){return X.value.find(e=>e.key===t)||null}const xr=["#e74c3c","#e67e22","#f1c40f","#2ecc71","#1abc9c","#3498db","#9b59b6","#e91e63","#795548","#607d8b"],Sr="_sidebar_1v6to_1",$r="_header_1v6to_12",Tr="_title_1v6to_21",Cr="_actions_1v6to_26",Ir="_iconBtn_1v6to_31",Ar="_newChatBtn_1v6to_50 _iconBtn_1v6to_31",Rr="_sessionList_1v6to_56",Pr="_sessionItem_1v6to_62",Lr="_active_1v6to_78",Dr="_avatar_1v6to_82",Er="_content_1v6to_96",Mr="_unreadDot_1v6to_111",Br="_time_1v6to_119",zr="_deleteBtn_1v6to_125",O={sidebar:Sr,header:$r,title:Tr,actions:Cr,iconBtn:Ir,newChatBtn:Ar,sessionList:Rr,sessionItem:Pr,active:Lr,avatar:Dr,content:Er,unreadDot:Mr,time:Br,deleteBtn:zr};function Nr(t){try{const e=new Date(t),n=new Date;return e.toDateString()===n.toDateString()?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):e.toLocaleDateString([],{month:"short",day:"numeric"})}catch{return""}}function Or(t,e){return!t.persona||!e.length?null:e.find(n=>n.key===t.persona)||null}function Hr({onNewChat:t,onSwitchChat:e,onDeleteChat:n,onManagePersonas:i,sidebarHidden:r}){const s=L.value,c=F.value,a=le.value,d=X.value;return r?null:l("aside",{class:O.sidebar,children:[l("div",{class:O.header,children:[l("h2",{class:O.title,children:"Chats"}),l("div",{class:O.actions,children:[l("button",{class:O.iconBtn,title:"Manage Personas",onClick:i,children:"⚙"}),l("button",{class:O.newChatBtn,title:"New Chat",onClick:t,children:"+"})]})]}),l("div",{class:O.sessionList,children:s.map(o=>{const h=Or(o,d),u=o.id===c;return l("div",{class:`${O.sessionItem}${u?` ${O.active}`:""}`,onClick:()=>e(o.id),children:[l("div",{class:O.avatar,style:{background:(h==null?void 0:h.color)||"#888"},children:h!=null&&h.name?h.name.charAt(0):"P"}),l("div",{class:O.content,children:[l("div",{class:O.title,children:[a[o.id]&&l("span",{class:O.unreadDot}),l("span",{children:o.title||"New Chat"})]}),o.updatedAt&&l("div",{class:O.time,children:Nr(o.updatedAt)})]}),l("button",{class:O.deleteBtn,title:"Delete chat",onClick:p=>{p.stopPropagation(),confirm("Delete this chat?")&&n(o.id)},children:"×"})]},o.id)})})]})}function Ht(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var de=Ht();function ri(t){de=t}var Pe={exec:()=>null};function C(t,e=""){let n=typeof t=="string"?t:t.source;const i={replace:(r,s)=>{let c=typeof s=="string"?s:s.source;return c=c.replace(H.caret,"$1"),n=n.replace(r,c),i},getRegex:()=>new RegExp(n,e)};return i}var H={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},Ur=/^(?:[ \t]*(?:\n|$))+/,jr=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,qr=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ze=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Fr=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ut=/(?:[*+-]|\d{1,9}[.)])/,si=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,oi=C(si).replace(/bull/g,Ut).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Zr=C(si).replace(/bull/g,Ut).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),jt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Wr=/^[^\n]+/,qt=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Gr=C(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",qt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Vr=C(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ut).getRegex(),lt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ft=/\x3C!--(?:-?>|[\s\S]*?(?:-->|$))/,Kr=C("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ft).replace("tag",lt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ai=C(jt).replace("hr",ze).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",lt).getRegex(),Jr=C(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ai).getRegex(),Zt={blockquote:Jr,code:jr,def:Gr,fences:qr,heading:Fr,hr:ze,html:Kr,lheading:oi,list:Vr,newline:Ur,paragraph:ai,table:Pe,text:Wr},hn=C("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ze).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",lt).getRegex(),Qr={...Zt,lheading:Zr,table:hn,paragraph:C(jt).replace("hr",ze).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",hn).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",lt).getRegex()},Xr={...Zt,html:C(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ft).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Pe,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:C(jt).replace("hr",ze).replace("heading",` *#{1,6} *[^
]`).replace("lheading",oi).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Yr=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,es=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,li=/^( {2,}|\\)\n(?!\s*$)/,ts=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ct=/[\p{P}\p{S}]/u,Wt=/[\s\p{P}\p{S}]/u,ci=/[^\s\p{P}\p{S}]/u,ns=C(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Wt).getRegex(),ui=/(?!~)[\p{P}\p{S}]/u,is=/(?!~)[\s\p{P}\p{S}]/u,rs=/(?:[^\s\p{P}\p{S}]|~)/u,ss=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,hi=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,os=C(hi,"u").replace(/punct/g,ct).getRegex(),as=C(hi,"u").replace(/punct/g,ui).getRegex(),di="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",ls=C(di,"gu").replace(/notPunctSpace/g,ci).replace(/punctSpace/g,Wt).replace(/punct/g,ct).getRegex(),cs=C(di,"gu").replace(/notPunctSpace/g,rs).replace(/punctSpace/g,is).replace(/punct/g,ui).getRegex(),us=C("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,ci).replace(/punctSpace/g,Wt).replace(/punct/g,ct).getRegex(),hs=C(/\\(punct)/,"gu").replace(/punct/g,ct).getRegex(),ds=C(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ps=C(Ft).replace("(?:-->|$)","-->").getRegex(),fs=C("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ps).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),tt=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,_s=C(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",tt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),pi=C(/^!?\[(label)\]\[(ref)\]/).replace("label",tt).replace("ref",qt).getRegex(),fi=C(/^!?\[(ref)\](?:\[\])?/).replace("ref",qt).getRegex(),gs=C("reflink|nolink(?!\\()","g").replace("reflink",pi).replace("nolink",fi).getRegex(),Gt={_backpedal:Pe,anyPunctuation:hs,autolink:ds,blockSkip:ss,br:li,code:es,del:Pe,emStrongLDelim:os,emStrongRDelimAst:ls,emStrongRDelimUnd:us,escape:Yr,link:_s,nolink:fi,punctuation:ns,reflink:pi,reflinkSearch:gs,tag:fs,text:ts,url:Pe},vs={...Gt,link:C(/^!?\[(label)\]\((.*?)\)/).replace("label",tt).getRegex(),reflink:C(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",tt).getRegex()},wt={...Gt,emStrongRDelimAst:cs,emStrongLDelim:as,url:C(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ms={...wt,br:C(li).replace("{2,}","*").getRegex(),text:C(wt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ue={normal:Zt,gfm:Qr,pedantic:Xr},we={normal:Gt,gfm:wt,breaks:ms,pedantic:vs},ys={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dn=t=>ys[t];function G(t,e){if(e){if(H.escapeTest.test(t))return t.replace(H.escapeReplace,dn)}else if(H.escapeTestNoEncode.test(t))return t.replace(H.escapeReplaceNoEncode,dn);return t}function pn(t){try{t=encodeURI(t).replace(H.percentDecode,"%")}catch{return null}return t}function fn(t,e){var s;const n=t.replace(H.findPipe,(c,a,d)=>{let o=!1,h=a;for(;--h>=0&&d[h]==="\\";)o=!o;return o?"|":" |"}),i=n.split(H.splitPipe);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!((s=i.at(-1))!=null&&s.trim())&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(H.slashPipe,"|");return i}function xe(t,e,n){const i=t.length;if(i===0)return"";let r=0;for(;r<i&&t.charAt(i-r-1)===e;)r++;return t.slice(0,i-r)}function ks(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return n>0?-2:-1}function _n(t,e,n,i,r){const s=e.href,c=e.title||null,a=t[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;const d={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:c,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,d}function bs(t,e,n){const i=t.match(n.other.indentCodeCompensation);if(i===null)return e;const r=i[1];return e.split(`
`).map(s=>{const c=s.match(n.other.beginningSpace);if(c===null)return s;const[a]=c;return a.length>=r.length?s.slice(r.length):s}).join(`
`)}var nt=class{constructor(t){A(this,"options");A(this,"rules");A(this,"lexer");this.options=t||de}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:xe(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],i=bs(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const i=xe(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:xe(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=xe(e[0],`
`).split(`
`),i="",r="";const s=[];for(;n.length>0;){let c=!1;const a=[];let d;for(d=0;d<n.length;d++)if(this.rules.other.blockquoteStart.test(n[d]))a.push(n[d]),c=!0;else if(!c)a.push(n[d]);else break;n=n.slice(d);const o=a.join(`
`),h=o.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${o}`:o,r=r?`${r}
${h}`:h;const u=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,s,!0),this.lexer.state.top=u,n.length===0)break;const p=s.at(-1);if((p==null?void 0:p.type)==="code")break;if((p==null?void 0:p.type)==="blockquote"){const f=p,g=f.raw+`
`+n.join(`
`),_=this.blockquote(g);s[s.length-1]=_,i=i.substring(0,i.length-f.raw.length)+_.raw,r=r.substring(0,r.length-f.text.length)+_.text;break}else if((p==null?void 0:p.type)==="list"){const f=p,g=f.raw+`
`+n.join(`
`),_=this.list(g);s[s.length-1]=_,i=i.substring(0,i.length-p.raw.length)+_.raw,r=r.substring(0,r.length-f.raw.length)+_.raw,n=g.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const i=n.length>1,r={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const s=this.rules.other.listItemRegex(n);let c=!1;for(;t;){let d=!1,o="",h="";if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;o=e[0],t=t.substring(o.length);let u=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,k=>" ".repeat(3*k.length)),p=t.split(`
`,1)[0],f=!u.trim(),g=0;if(this.options.pedantic?(g=2,h=u.trimStart()):f?g=e[1].length+1:(g=e[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,h=u.slice(g),g+=e[1].length),f&&this.rules.other.blankLine.test(p)&&(o+=p+`
`,t=t.substring(p.length+1),d=!0),!d){const k=this.rules.other.nextBulletRegex(g),y=this.rules.other.hrRegex(g),D=this.rules.other.fencesBeginRegex(g),v=this.rules.other.headingBeginRegex(g),R=this.rules.other.htmlBeginRegex(g);for(;t;){const P=t.split(`
`,1)[0];let z;if(p=P,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),z=p):z=p.replace(this.rules.other.tabCharGlobal,"    "),D.test(p)||v.test(p)||R.test(p)||k.test(p)||y.test(p))break;if(z.search(this.rules.other.nonSpaceChar)>=g||!p.trim())h+=`
`+z.slice(g);else{if(f||u.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||D.test(u)||v.test(u)||y.test(u))break;h+=`
`+p}!f&&!p.trim()&&(f=!0),o+=P+`
`,t=t.substring(P.length+1),u=z.slice(g)}}r.loose||(c?r.loose=!0:this.rules.other.doubleBlankLine.test(o)&&(c=!0));let _=null,m;this.options.gfm&&(_=this.rules.other.listIsTask.exec(h),_&&(m=_[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:o,task:!!_,checked:m,loose:!1,text:h,tokens:[]}),r.raw+=o}const a=r.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let d=0;d<r.items.length;d++)if(this.lexer.state.top=!1,r.items[d].tokens=this.lexer.blockTokens(r.items[d].text,[]),!r.loose){const o=r.items[d].tokens.filter(u=>u.type==="space"),h=o.length>0&&o.some(u=>this.rules.other.anyLine.test(u.raw));r.loose=h}if(r.loose)for(let d=0;d<r.items.length;d++)r.items[d].loose=!0;return r}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:i,title:r}}}table(t){var c;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=fn(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(c=e[3])!=null&&c.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const a of i)this.rules.other.tableAlignRight.test(a)?s.align.push("right"):this.rules.other.tableAlignCenter.test(a)?s.align.push("center"):this.rules.other.tableAlignLeft.test(a)?s.align.push("left"):s.align.push(null);for(let a=0;a<n.length;a++)s.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:s.align[a]});for(const a of r)s.rows.push(fn(a,s.header.length).map((d,o)=>({text:d,tokens:this.lexer.inline(d),header:!1,align:s.align[o]})));return s}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const s=xe(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{const s=ks(e[2],"()");if(s===-2)return;if(s>-1){const a=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let i=e[2],r="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],r=s[3])}else r=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),_n(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[i.toLowerCase()];if(!r){const s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return _n(n,r,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const s=[...i[0]].length-1;let c,a,d=s,o=0;const h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,e=e.slice(-1*t.length+s);(i=h.exec(e))!=null;){if(c=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!c)continue;if(a=[...c].length,i[3]||i[4]){d+=a;continue}else if((i[5]||i[6])&&s%3&&!((s+a)%3)){o+=a;continue}if(d-=a,d>0)continue;a=Math.min(a,a+d+o);const u=[...i[0]][0].length,p=t.slice(0,s+i.index+u+a);if(Math.min(s,a)%2){const g=p.slice(1,-1);return{type:"em",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}const f=p.slice(2,-2);return{type:"strong",raw:p,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(n),r=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&r&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,i;return e[2]==="@"?(n=e[1],i="mailto:"+n):(n=e[1],i=n),{type:"link",raw:e[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let i,r;if(e[2]==="@")i=e[0],r="mailto:"+i;else{let s;do s=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(s!==e[0]);i=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},J=class xt{constructor(e){A(this,"tokens");A(this,"options");A(this,"state");A(this,"tokenizer");A(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||de,this.options.tokenizer=this.options.tokenizer||new nt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:H,block:Ue.normal,inline:we.normal};this.options.pedantic?(n.block=Ue.pedantic,n.inline=we.pedantic):this.options.gfm&&(n.block=Ue.gfm,this.options.breaks?n.inline=we.breaks:n.inline=we.gfm),this.tokenizer.rules=n}static get rules(){return{block:Ue,inline:we}}static lex(e,n){return new xt(n).lex(e)}static lexInline(e,n){return new xt(n).inlineTokens(e)}lex(e){e=e.replace(H.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],i=!1){var r,s,c;for(this.options.pedantic&&(e=e.replace(H.tabCharGlobal,"    ").replace(H.spaceLine,""));e;){let a;if((s=(r=this.options.extensions)==null?void 0:r.block)!=null&&s.some(o=>(a=o.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const o=n.at(-1);a.raw.length===1&&o!==void 0?o.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const o=n.at(-1);(o==null?void 0:o.type)==="paragraph"||(o==null?void 0:o.type)==="text"?(o.raw+=`
`+a.raw,o.text+=`
`+a.text,this.inlineQueue.at(-1).src=o.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const o=n.at(-1);(o==null?void 0:o.type)==="paragraph"||(o==null?void 0:o.type)==="text"?(o.raw+=`
`+a.raw,o.text+=`
`+a.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let d=e;if((c=this.options.extensions)!=null&&c.startBlock){let o=1/0;const h=e.slice(1);let u;this.options.extensions.startBlock.forEach(p=>{u=p.call({lexer:this},h),typeof u=="number"&&u>=0&&(o=Math.min(o,u))}),o<1/0&&o>=0&&(d=e.substring(0,o+1))}if(this.state.top&&(a=this.tokenizer.paragraph(d))){const o=n.at(-1);i&&(o==null?void 0:o.type)==="paragraph"?(o.raw+=`
`+a.raw,o.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(a),i=d.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const o=n.at(-1);(o==null?void 0:o.type)==="text"?(o.raw+=`
`+a.raw,o.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(a);continue}if(e){const o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var a,d,o;let i=e,r=null;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)h.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,c="";for(;e;){s||(c=""),s=!1;let h;if((d=(a=this.options.extensions)==null?void 0:a.inline)!=null&&d.some(p=>(h=p.call({lexer:this},e,n))?(e=e.substring(h.raw.length),n.push(h),!0):!1))continue;if(h=this.tokenizer.escape(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.tag(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.link(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(h.raw.length);const p=n.at(-1);h.type==="text"&&(p==null?void 0:p.type)==="text"?(p.raw+=h.raw,p.text+=h.text):n.push(h);continue}if(h=this.tokenizer.emStrong(e,i,c)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.codespan(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.br(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.del(e)){e=e.substring(h.raw.length),n.push(h);continue}if(h=this.tokenizer.autolink(e)){e=e.substring(h.raw.length),n.push(h);continue}if(!this.state.inLink&&(h=this.tokenizer.url(e))){e=e.substring(h.raw.length),n.push(h);continue}let u=e;if((o=this.options.extensions)!=null&&o.startInline){let p=1/0;const f=e.slice(1);let g;this.options.extensions.startInline.forEach(_=>{g=_.call({lexer:this},f),typeof g=="number"&&g>=0&&(p=Math.min(p,g))}),p<1/0&&p>=0&&(u=e.substring(0,p+1))}if(h=this.tokenizer.inlineText(u)){e=e.substring(h.raw.length),h.raw.slice(-1)!=="_"&&(c=h.raw.slice(-1)),s=!0;const p=n.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=h.raw,p.text+=h.text):n.push(h);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return n}},Ee=class{constructor(t){A(this,"options");A(this,"parser");this.options=t||de}space(t){return""}code({text:t,lang:e,escaped:n}){var s;const i=(s=(e||"").match(H.notSpaceStart))==null?void 0:s[0],r=t.replace(H.endingNewline,"")+`
`;return i?'<pre><code class="language-'+G(i)+'">'+(n?r:G(r,!0))+`</code></pre>
`:"<pre><code>"+(n?r:G(r,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let i="";for(let c=0;c<t.items.length;c++){const a=t.items[c];i+=this.listitem(a)}const r=e?"ol":"ul",s=e&&n!==1?' start="'+n+'"':"";return"<"+r+s+`>
`+i+"</"+r+`>
`}listitem(t){var n;let e="";if(t.task){const i=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=i+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=i+" "+G(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):e+=i+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let r=0;r<t.header.length;r++)n+=this.tablecell(t.header[r]);e+=this.tablerow({text:n});let i="";for(let r=0;r<t.rows.length;r++){const s=t.rows[r];n="";for(let c=0;c<s.length;c++)n+=this.tablecell(s[c]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${G(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const i=this.parser.parseInline(n),r=pn(t);if(r===null)return i;t=r;let s='<a href="'+t+'"';return e&&(s+=' title="'+G(e)+'"'),s+=">"+i+"</a>",s}image({href:t,title:e,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));const r=pn(t);if(r===null)return G(n);t=r;let s=`<img src="${t}" alt="${n}"`;return e&&(s+=` title="${G(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:G(t.text)}},Vt=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Q=class St{constructor(e){A(this,"options");A(this,"renderer");A(this,"textRenderer");this.options=e||de,this.options.renderer=this.options.renderer||new Ee,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Vt}static parse(e,n){return new St(n).parse(e)}static parseInline(e,n){return new St(n).parseInline(e)}parse(e,n=!0){var r,s;let i="";for(let c=0;c<e.length;c++){const a=e[c];if((s=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&s[a.type]){const o=a,h=this.options.extensions.renderers[o.type].call({parser:this},o);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){i+=h||"";continue}}const d=a;switch(d.type){case"space":{i+=this.renderer.space(d);continue}case"hr":{i+=this.renderer.hr(d);continue}case"heading":{i+=this.renderer.heading(d);continue}case"code":{i+=this.renderer.code(d);continue}case"table":{i+=this.renderer.table(d);continue}case"blockquote":{i+=this.renderer.blockquote(d);continue}case"list":{i+=this.renderer.list(d);continue}case"html":{i+=this.renderer.html(d);continue}case"paragraph":{i+=this.renderer.paragraph(d);continue}case"text":{let o=d,h=this.renderer.text(o);for(;c+1<e.length&&e[c+1].type==="text";)o=e[++c],h+=`
`+this.renderer.text(o);n?i+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):i+=h;continue}default:{const o='Token with "'+d.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}parseInline(e,n=this.renderer){var r,s;let i="";for(let c=0;c<e.length;c++){const a=e[c];if((s=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&s[a.type]){const o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){i+=o||"";continue}}const d=a;switch(d.type){case"escape":{i+=n.text(d);break}case"html":{i+=n.html(d);break}case"link":{i+=n.link(d);break}case"image":{i+=n.image(d);break}case"strong":{i+=n.strong(d);break}case"em":{i+=n.em(d);break}case"codespan":{i+=n.codespan(d);break}case"br":{i+=n.br(d);break}case"del":{i+=n.del(d);break}case"text":{i+=n.text(d);break}default:{const o='Token with "'+d.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}},ft,Ge=(ft=class{constructor(t){A(this,"options");A(this,"block");this.options=t||de}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?J.lex:J.lexInline}provideParser(){return this.block?Q.parse:Q.parseInline}},A(ft,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),ft),ws=class{constructor(...t){A(this,"defaults",Ht());A(this,"options",this.setOptions);A(this,"parse",this.parseMarkdown(!0));A(this,"parseInline",this.parseMarkdown(!1));A(this,"Parser",Q);A(this,"Renderer",Ee);A(this,"TextRenderer",Vt);A(this,"Lexer",J);A(this,"Tokenizer",nt);A(this,"Hooks",Ge);this.use(...t)}walkTokens(t,e){var i,r;let n=[];for(const s of t)switch(n=n.concat(e.call(this,s)),s.type){case"table":{const c=s;for(const a of c.header)n=n.concat(this.walkTokens(a.tokens,e));for(const a of c.rows)for(const d of a)n=n.concat(this.walkTokens(d.tokens,e));break}case"list":{const c=s;n=n.concat(this.walkTokens(c.items,e));break}default:{const c=s;(r=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&r[c.type]?this.defaults.extensions.childTokens[c.type].forEach(a=>{const d=c[a].flat(1/0);n=n.concat(this.walkTokens(d,e))}):c.tokens&&(n=n.concat(this.walkTokens(c.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const s=e.renderers[r.name];s?e.renderers[r.name]=function(...c){let a=r.renderer.apply(this,c);return a===!1&&(a=s.apply(this,c)),a}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=e[r.level];s?s.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),i.extensions=e),n.renderer){const r=this.defaults.renderer||new Ee(this.defaults);for(const s in n.renderer){if(!(s in r))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const c=s,a=n.renderer[c],d=r[c];r[c]=(...o)=>{let h=a.apply(r,o);return h===!1&&(h=d.apply(r,o)),h||""}}i.renderer=r}if(n.tokenizer){const r=this.defaults.tokenizer||new nt(this.defaults);for(const s in n.tokenizer){if(!(s in r))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const c=s,a=n.tokenizer[c],d=r[c];r[c]=(...o)=>{let h=a.apply(r,o);return h===!1&&(h=d.apply(r,o)),h}}i.tokenizer=r}if(n.hooks){const r=this.defaults.hooks||new Ge;for(const s in n.hooks){if(!(s in r))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const c=s,a=n.hooks[c],d=r[c];Ge.passThroughHooks.has(s)?r[c]=o=>{if(this.defaults.async)return Promise.resolve(a.call(r,o)).then(u=>d.call(r,u));const h=a.call(r,o);return d.call(r,h)}:r[c]=(...o)=>{let h=a.apply(r,o);return h===!1&&(h=d.apply(r,o)),h}}i.hooks=r}if(n.walkTokens){const r=this.defaults.walkTokens,s=n.walkTokens;i.walkTokens=function(c){let a=[];return a.push(s.call(this,c)),r&&(a=a.concat(r.call(this,c))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return J.lex(t,e??this.defaults)}parser(t,e){return Q.parse(t,e??this.defaults)}parseMarkdown(t){return(n,i)=>{const r={...i},s={...this.defaults,...r},c=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&r.async===!1)return c(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return c(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=t);const a=s.hooks?s.hooks.provideLexer():t?J.lex:J.lexInline,d=s.hooks?s.hooks.provideParser():t?Q.parse:Q.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(o=>a(o,s)).then(o=>s.hooks?s.hooks.processAllTokens(o):o).then(o=>s.walkTokens?Promise.all(this.walkTokens(o,s.walkTokens)).then(()=>o):o).then(o=>d(o,s)).then(o=>s.hooks?s.hooks.postprocess(o):o).catch(c);try{s.hooks&&(n=s.hooks.preprocess(n));let o=a(n,s);s.hooks&&(o=s.hooks.processAllTokens(o)),s.walkTokens&&this.walkTokens(o,s.walkTokens);let h=d(o,s);return s.hooks&&(h=s.hooks.postprocess(h)),h}catch(o){return c(o)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const i="<p>An error occurred:</p><pre>"+G(n.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(n);throw n}}},ue=new ws;function $(t,e){return ue.parse(t,e)}$.options=$.setOptions=function(t){return ue.setOptions(t),$.defaults=ue.defaults,ri($.defaults),$};$.getDefaults=Ht;$.defaults=de;$.use=function(...t){return ue.use(...t),$.defaults=ue.defaults,ri($.defaults),$};$.walkTokens=function(t,e){return ue.walkTokens(t,e)};$.parseInline=ue.parseInline;$.Parser=Q;$.parser=Q.parse;$.Renderer=Ee;$.TextRenderer=Vt;$.Lexer=J;$.lexer=J.lex;$.Tokenizer=nt;$.Hooks=Ge;$.parse=$;$.options;$.setOptions;$.use;$.walkTokens;$.parseInline;Q.parse;J.lex;const it=new Ee,xs=it.link.bind(it);it.link=function(t){return xs(t).replace("<a ",'<a target="_blank" rel="noopener" ')};$.setOptions({renderer:it,gfm:!0,breaks:!0});function Le(t){return $.parse(t,{async:!1})}function Ss({message:t}){return t.role==="user"||t.role==="system"?l("div",{class:`message ${t.role}`,children:t.content}):l("div",{class:"message assistant",dangerouslySetInnerHTML:{__html:Le(t.content)}})}function $s(){return l("div",{class:"thinking",children:[l("span",{}),l("span",{}),l("span",{})]})}function Ts({onScroll:t}){const e=pe(null),n=ce.value,i=Be.value,r=be.value,s=ie.value;return ne(()=>{const c=e.current;c&&(c.scrollTop=c.scrollHeight)},[n,i,s]),l("div",{ref:e,"data-messages":!0,style:Cs,onScroll:t,children:[n.map((c,a)=>l(Ss,{message:c},a)),r&&i&&l("div",{class:"message assistant",dangerouslySetInnerHTML:{__html:Le(i)}}),s&&l($s,{})]})}const Cs={flex:"1",overflowY:"auto",padding:"16px",display:"flex",flexDirection:"column",gap:"12px"},Is="_form_572ba_1",As="_input_572ba_10",Rs="_sendBtn_572ba_28",dt={form:Is,input:As,sendBtn:Rs};function Ps({onSend:t,onCancel:e}){const n=pe(null),i=_e.value,r=fe.value==="connected";function s(d){if(d.preventDefault(),i){e();return}const o=n.current;if(!o)return;const h=o.value.trim();h&&(t(h),o.value="",o.style.height="auto")}function c(){const d=n.current;d&&(d.style.height="auto",d.style.height=Math.min(d.scrollHeight,120)+"px")}function a(d){d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),s(d))}return l("form",{class:dt.form,onSubmit:s,children:[l("textarea",{ref:n,class:dt.input,placeholder:"Type a message...",rows:1,autoComplete:"off",disabled:i,onInput:c,onKeyDown:a}),l("button",{type:"submit",class:dt.sendBtn,disabled:!i&&!r,children:i?"Stop":"Send"})]})}const Ls="_chatArea_850fi_1",Ds="_chatBody_850fi_9",Es="_chatMain_850fi_16",Ms="_scrollBtn_850fi_24",je={chatArea:Ls,chatBody:Ds,chatMain:Es,scrollBtn:Ms};function Bs({sidebarHidden:t,onNewChat:e,onSwitchChat:n,onDeleteChat:i,onManagePersonas:r}){const s=F.value,c=s?ti(s):null;function a(){s&&te({type:"cancel",chatId:s}),_e.value=!1,ie.value=!1}ne(()=>{function u(p){p.key==="Escape"&&_e.value&&(p.preventDefault(),a())}return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[s]);function d(u){if(!s)return;We("user",u),ie.value=!0,ei(s,u),kt(s);const p={type:"message",content:u,chatId:s};c&&(p.persona=c),te(p),_e.value=!0}function o(u){const p=u.target,f=p.scrollHeight-p.scrollTop-p.clientHeight<100,g=document.getElementById("scroll-bottom-btn");g&&g.classList.toggle("hidden",f)}function h(){const u=document.querySelector("[data-messages]");u&&(u.scrollTop=u.scrollHeight)}return l("div",{class:je.chatArea,children:l("div",{class:je.chatBody,children:[l(Hr,{onNewChat:e,onSwitchChat:n,onDeleteChat:i,onManagePersonas:r,sidebarHidden:t}),l("div",{class:je.chatMain,children:[l(Ts,{onScroll:o}),l("button",{id:"scroll-bottom-btn",class:`${je.scrollBtn} hidden`,title:"Scroll to bottom",onClick:h,children:"↓"}),l(Ps,{onSend:d,onCancel:a})]})]})})}const _i=I([]),gi=I([]),vi=I({models:[],providers:[],agents:[]}),$t=I("-"),Tt=I("-"),Ct=I("-"),It=I("-");function mi(t){return t==null?"0":t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":String(t)}function yi(t){return t==null?"—":t<.01?"<$0.01":"$"+t.toFixed(2)}function qe(t){let e=0,n=0,i=!1;for(const s of t)e+=s.total_tokens||0,s.estimated_cost!=null&&(n+=s.estimated_cost,i=!0);let r=mi(e);return i&&n>0&&(r+=" ("+yi(n)+")"),r}async function zs(){try{vi.value=await er()}catch{}}async function Ns(t){try{const n=await Yi(t);Array.isArray(n)&&(_i.value=n)}catch{}const e={...t};delete e.groupBy;try{const n=await $e(e);Array.isArray(n)&&(gi.value=n)}catch{}await Os()}async function Os(){const t=new Date,e=t.toISOString().slice(0,10),n=e+"T00:00:00Z",i=e+"T23:59:59Z";try{const o=await $e({from:n,to:i});$t.value=qe(o)}catch{$t.value="-"}const r=t.getDay(),s=r===0?6:r-1,c=new Date(t);c.setDate(t.getDate()-s);const a=c.toISOString().slice(0,10)+"T00:00:00Z";try{const o=await $e({from:a,to:i});Tt.value=qe(o)}catch{Tt.value="-"}const d=e.slice(0,7)+"-01T00:00:00Z";try{const o=await $e({from:d,to:i});Ct.value=qe(o)}catch{Ct.value="-"}try{const o=await $e({});It.value=qe(o)}catch{It.value="-"}}const Hs="_view_jyvol_1",Us="_content_jyvol_9",js="_filters_jyvol_25",qs="_summaryCards_jyvol_58",Fs="_card_jyvol_65",Zs="_cardLabel_jyvol_73",Ws="_cardValue_jyvol_79",Gs="_tableWrap_jyvol_85",Vs="_table_jyvol_85",Ks="_sortAsc_jyvol_127",Js="_sortDesc_jyvol_132",Qs="_noData_jyvol_137",E={view:Hs,content:Us,filters:js,summaryCards:qs,card:Fs,cardLabel:Zs,cardValue:Ws,tableWrap:Gs,table:Vs,sortAsc:Ks,sortDesc:Js,noData:Qs},Xs=[{key:"first",label:"Group"},{key:"calls",label:"Calls"},{key:"input_tokens",label:"Input"},{key:"output_tokens",label:"Output"},{key:"total_tokens",label:"Total"},{key:"cached_input_tokens",label:"Cached"},{key:"estimated_cost",label:"Cost"}];function gn(t){const e=t.trim();return e.endsWith("M")?parseFloat(e)*1e6:e.endsWith("K")?parseFloat(e)*1e3:parseFloat(e)||0}function pt(t,e,n){if(e==="first")return String(t[n]||"-");if(e==="estimated_cost")return yi(t.estimated_cost);const i=t[e];return mi(i)}function vn({rows:t,firstCol:e}){const[n,i]=x("total_tokens"),[r,s]=x(!1),c=Xs.map(o=>o.key==="first"?{...o,label:e==="date"?"Date":"Group"}:o);function a(o){o===n?s(!r):(i(o),s(!1))}const d=[...t].sort((o,h)=>{const u=pt(o,n,e),p=pt(h,n,e),f=gn(u),g=gn(p);return!isNaN(f)&&!isNaN(g)?r?f-g:g-f:r?u.localeCompare(p):p.localeCompare(u)});return t.length?l("div",{class:E.tableWrap,children:l("table",{class:E.table,children:[l("thead",{children:l("tr",{children:c.map(o=>l("th",{class:n===o.key?r?E.sortAsc:E.sortDesc:"",onClick:()=>a(o.key),children:o.label},o.key))})}),l("tbody",{children:d.map((o,h)=>l("tr",{children:c.map(u=>l("td",{children:pt(o,u.key,e)},u.key))},h))})]})}):l("div",{class:E.noData,children:"No data"})}function Ys(){const[t,e]=x(""),[n,i]=x(""),[r,s]=x(""),[c,a]=x(""),[d,o]=x(""),[h,u]=x("model"),p=vi.value;ne(()=>{zs(),g()},[]);function f(){const _={};return t&&(_.from=t+"T00:00:00Z"),n&&(_.to=n+"T23:59:59Z"),r&&(_.model=r),c&&(_.provider=c),d&&(_.agent=d),h&&(_.groupBy=h),_}function g(){Ns(f())}return l("div",{class:E.view,children:l("div",{class:E.content,children:[l("div",{class:E.filters,children:[l("label",{children:["From",l("input",{type:"date",value:t,onInput:_=>e(_.target.value)})]}),l("label",{children:["To",l("input",{type:"date",value:n,onInput:_=>i(_.target.value)})]}),l("label",{children:["Model",l("select",{value:r,onChange:_=>s(_.target.value),children:[l("option",{value:"",children:"All"}),p.models.map(_=>l("option",{value:_,children:_},_))]})]}),l("label",{children:["Provider",l("select",{value:c,onChange:_=>a(_.target.value),children:[l("option",{value:"",children:"All"}),p.providers.map(_=>l("option",{value:_,children:_},_))]})]}),l("label",{children:["Agent",l("select",{value:d,onChange:_=>o(_.target.value),children:[l("option",{value:"",children:"All"}),p.agents.map(_=>l("option",{value:_,children:_},_))]})]}),l("label",{children:["Group by",l("select",{value:h,onChange:_=>u(_.target.value),children:[l("option",{value:"model",children:"Model"}),l("option",{value:"provider",children:"Provider"}),l("option",{value:"agent",children:"Agent"}),l("option",{value:"session",children:"Session"}),l("option",{value:"call_type",children:"Call Type"})]})]}),l("button",{class:"btn-primary",style:{alignSelf:"flex-end",padding:"6px 16px",fontSize:"13px"},onClick:g,children:"Refresh"})]}),l("div",{class:E.summaryCards,children:[l("div",{class:E.card,children:[l("div",{class:E.cardLabel,children:"Today"}),l("div",{class:E.cardValue,children:$t.value})]}),l("div",{class:E.card,children:[l("div",{class:E.cardLabel,children:"This Week"}),l("div",{class:E.cardValue,children:Tt.value})]}),l("div",{class:E.card,children:[l("div",{class:E.cardLabel,children:"This Month"}),l("div",{class:E.cardValue,children:Ct.value})]}),l("div",{class:E.card,children:[l("div",{class:E.cardLabel,children:"All Time"}),l("div",{class:E.cardValue,children:It.value})]})]}),l("h3",{children:"Summary"}),l(vn,{rows:_i.value,firstCol:"group_key"}),l("h3",{children:"Daily Breakdown"}),l(vn,{rows:gi.value,firstCol:"date"})]})})}const ki=I([]),At=I(!1);async function ve(){try{ki.value=await tr()}catch(t){console.error("Failed to load tasks:",t)}}function ut({visible:t,onClose:e,wide:n,children:i}){return t?l("div",{class:"modal",onClick:r=>{r.target===r.currentTarget&&e()},children:l("div",{class:`modal-content${n?" modal-wide":""}`,children:i})}):null}const eo="_view_sylgi_1",to="_board_sylgi_9",no="_column_sylgi_18",io="_columnHeader_sylgi_30",ro="_columnTitle_sylgi_39",so="_columnCount_sylgi_47",oo="_cards_sylgi_56",ao="_dragOver_sylgi_66",lo="_card_sylgi_56",co="_dragging_sylgi_88",uo="_cardTitle_sylgi_92",ho="_priorityDot_sylgi_101",po="_priorityLow_sylgi_108",fo="_priorityMedium_sylgi_111",_o="_priorityHigh_sylgi_114",go="_priorityUrgent_sylgi_117",vo="_cardMeta_sylgi_121",mo="_cardAssignee_sylgi_128",yo="_cardTag_sylgi_142",ko="_detailContent_sylgi_152",bo="_detailHeader_sylgi_165",wo="_detailTitleInput_sylgi_173",xo="_detailId_sylgi_188",So="_detailBody_sylgi_202",$o="_detailLeft_sylgi_208",To="_detailRight_sylgi_217",Co="_detailMeta_sylgi_226",Io="_sectionLabel_sylgi_260",Ao="_description_sylgi_268",Ro="_descriptionPlaceholder_sylgi_288",Po="_descriptionEdit_sylgi_294",Lo="_taskMessages_sylgi_310",Do="_taskMessagesEmpty_sylgi_324",Eo="_taskInputForm_sylgi_331",Mo="_editorForm_sylgi_372",b={view:eo,board:to,column:no,columnHeader:io,columnTitle:ro,columnCount:so,cards:oo,dragOver:ao,card:lo,dragging:co,cardTitle:uo,priorityDot:ho,priorityLow:po,priorityMedium:fo,priorityHigh:_o,priorityUrgent:go,cardMeta:vo,cardAssignee:mo,cardTag:yo,detailContent:ko,detailHeader:bo,detailTitleInput:wo,detailId:xo,detailBody:So,detailLeft:$o,detailRight:To,detailMeta:Co,sectionLabel:Io,description:Ao,descriptionPlaceholder:Ro,descriptionEdit:Po,taskMessages:Lo,taskMessagesEmpty:Do,taskInputForm:Eo,editorForm:Mo};function Bo({visible:t,task:e,onClose:n}){const[i,r]=x(""),[s,c]=x(""),[a,d]=x("medium"),[o,h]=x(""),[u,p]=x(""),f=X.value;ne(()=>{t&&(e?(r(e.title),c(e.description||""),d(e.priority||"medium"),h(e.assignee||""),p((e.tags||[]).join(", "))):(r(""),c(""),d("medium"),h(""),p("")))},[t,e]);async function g(m){m.preventDefault();const k=u.split(",").map(y=>y.trim()).filter(y=>y.length>0);try{if(e){await Gn(e.id,{title:i,description:s,priority:a,tags:k});const y=o||null,D=e.assignee||null;y!==D&&await Jn(e.id,y)}else await nr({title:i,description:s,priority:a,assignee:o||null,tags:k});await ve(),n()}catch(y){console.error("Task save failed:",y)}}async function _(){!e||!confirm("Delete this task?")||(await Vn(e.id),await ve(),n())}return l(ut,{visible:t,onClose:n,wide:!0,children:[l("h3",{children:e?"Edit Task":"New Task"}),l("form",{class:b.editorForm,onSubmit:g,children:[l("label",{children:["Title",l("input",{type:"text",required:!0,placeholder:"Task title",value:i,onInput:m=>r(m.target.value)})]}),l("label",{children:["Description",l("textarea",{rows:3,placeholder:"Markdown description...",value:s,onInput:m=>c(m.target.value)})]}),l("label",{children:["Priority",l("select",{value:a,onChange:m=>d(m.target.value),children:[l("option",{value:"low",children:"Low"}),l("option",{value:"medium",children:"Medium"}),l("option",{value:"high",children:"High"}),l("option",{value:"urgent",children:"Urgent"})]})]}),l("label",{children:["Assignee",l("select",{value:o,onChange:m=>h(m.target.value),children:[l("option",{value:"",children:"Unassigned"}),f.map(m=>l("option",{value:m.key,children:m.name},m.key))]})]}),l("label",{children:["Tags (comma-separated)",l("input",{type:"text",placeholder:"e.g. bug, frontend",value:u,onInput:m=>p(m.target.value)})]}),l("div",{class:"modal-actions",children:[e&&l("button",{type:"button",class:"btn-danger",style:{marginRight:"auto"},onClick:_,children:"Delete"}),l("button",{type:"button",class:"btn-secondary",style:{width:"auto"},onClick:n,children:"Cancel"}),l("button",{type:"submit",class:"btn-primary",children:"Save"})]})]})]})}function zo({task:t,onClose:e}){const[n,i]=x(t.title),[r,s]=x(t.status),[c,a]=x(t.priority),[d,o]=x(t.assignee||""),[h,u]=x((t.tags||[]).join(", ")),[p,f]=x(t.description||""),[g,_]=x(!1),m=pe(null),k=pe(null),y=X.value,D=W.value,v=et.value,R=Re.value,P=pe(t.status),z=pe(t.assignee||"");ne(()=>(bt.value=t.id,W.value=[],et.value="",Re.value=!1,te({type:"get_task_history",chatId:t.id}),()=>{bt.value=null}),[t.id]),ne(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[D,v]);async function Z(){const w=h.split(",").map(V=>V.trim()).filter(V=>V.length>0),U=[];U.push(Gn(t.id,{title:n,description:p,priority:c,tags:w})),r!==P.current&&U.push(Kn(t.id,r).then(()=>{P.current=r})),d!==z.current&&U.push(Jn(t.id,d||null).then(()=>{z.current=d})),await Promise.all(U).catch(V=>console.error("Save failed:",V))}function j(){Z().then(()=>{ve(),e()})}async function Y(){confirm("Delete this task?")&&(await Vn(t.id),await ve(),e())}function Kt(w){w.preventDefault();const U=k.current;if(!U)return;const V=U.value.trim();V&&(W.value=[...W.value,{role:"user",content:V}],U.value="",te({type:"task_message",chatId:t.id,content:V}))}function bi(){const w="task:"+t.id;navigator.clipboard.writeText(w).catch(()=>{})}return l("div",{class:"modal",onClick:w=>{w.target===w.currentTarget&&j()},children:l("div",{class:b.detailContent,children:[l("div",{class:b.detailHeader,children:[l("input",{type:"text",class:b.detailTitleInput,placeholder:"Task title",value:n,onInput:w=>i(w.target.value),onChange:()=>Z()}),l("span",{class:b.detailId,onClick:bi,children:["#",t.id]}),l("button",{class:"btn-danger btn-sm",title:"Delete task",onClick:Y,children:"Delete"}),l("button",{class:"btn-text",title:"Close",onClick:j,children:"×"})]}),l("div",{class:b.detailBody,children:[l("div",{class:b.detailLeft,children:[l("div",{class:b.detailMeta,children:[l("label",{children:["Status",l("select",{value:r,onChange:w=>{s(w.target.value),Z()},children:[l("option",{value:"backlog",children:"Backlog"}),l("option",{value:"todo",children:"Todo"}),l("option",{value:"in_progress",children:"In Progress"}),l("option",{value:"done",children:"Done"})]})]}),l("label",{children:["Priority",l("select",{value:c,onChange:w=>{a(w.target.value),Z()},children:[l("option",{value:"low",children:"Low"}),l("option",{value:"medium",children:"Medium"}),l("option",{value:"high",children:"High"}),l("option",{value:"urgent",children:"Urgent"})]})]}),l("label",{children:["Assignee",l("select",{value:d,onChange:w=>{o(w.target.value),Z()},children:[l("option",{value:"",children:"Unassigned"}),y.map(w=>l("option",{value:w.key,children:w.name},w.key))]})]}),l("label",{children:["Tags",l("input",{type:"text",placeholder:"comma-separated",value:h,onInput:w=>u(w.target.value),onChange:()=>Z()})]})]}),l("div",{class:b.sectionLabel,children:"Description"}),g?l("textarea",{class:b.descriptionEdit,placeholder:"Description (markdown supported)...",value:p,onInput:w=>f(w.target.value),onBlur:()=>{_(!1),Z()},autoFocus:!0}):l("div",{class:b.description,onClick:()=>_(!0),dangerouslySetInnerHTML:{__html:p?Le(p):'<span class="'+b.descriptionPlaceholder+'">Click to add a description...</span>'}})]}),l("div",{class:b.detailRight,children:[l("div",{class:b.taskMessages,ref:m,children:[D.length===0&&!R&&l("div",{class:b.taskMessagesEmpty,children:"No messages yet. Start a conversation about this task."}),D.map((w,U)=>l("div",{class:`message ${w.role}`,children:w.role==="assistant"?l("span",{dangerouslySetInnerHTML:{__html:Le(w.content)}}):w.content},U)),R&&v&&l("div",{class:"message assistant",dangerouslySetInnerHTML:{__html:Le(v)}})]}),l("form",{class:b.taskInputForm,onSubmit:Kt,children:[l("textarea",{ref:k,placeholder:"Discuss this task...",rows:1,onKeyDown:w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),Kt(w))},onInput:w=>{const U=w.target;U.style.height="auto",U.style.height=Math.min(U.scrollHeight,120)+"px"}}),l("button",{type:"submit",children:"Send"})]})]})]})]})})}const No=[{key:"backlog",label:"Backlog"},{key:"todo",label:"Todo"},{key:"in_progress",label:"In Progress"},{key:"done",label:"Done"}],mn={urgent:0,high:1,medium:2,low:3};function Oo(t){switch(t){case"low":return b.priorityLow;case"medium":return b.priorityMedium;case"high":return b.priorityHigh;case"urgent":return b.priorityUrgent;default:return b.priorityMedium}}function Ho(){const[t]=x(null),[e,n]=x(null),[i,r]=x(null),s=At.value,c=ki.value,a=X.value;ne(()=>{ve()},[]);const d={backlog:[],todo:[],in_progress:[],done:[]};for(const u of c)d[u.status]&&d[u.status].push(u);for(const u of Object.values(d))u.sort((p,f)=>(mn[p.priority]??3)-(mn[f.priority]??3));function o(u,p){var g;u.preventDefault(),r(null);const f=(g=u.dataTransfer)==null?void 0:g.getData("text/plain");!f||!p||Kn(f,p).then(()=>ve())}function h(u){const p=a.find(f=>f.key===u);return(p==null?void 0:p.color)||"var(--accent)"}return l("div",{class:b.view,children:[l("div",{class:b.board,children:No.map(({key:u,label:p})=>l("div",{class:b.column,children:[l("div",{class:b.columnHeader,children:[l("span",{class:b.columnTitle,children:p}),l("span",{class:b.columnCount,children:d[u].length})]}),l("div",{class:`${b.cards}${i===u?` ${b.dragOver}`:""}`,onDragOver:f=>{f.preventDefault(),r(u)},onDragLeave:()=>r(null),onDrop:f=>o(f,u),children:d[u].map(f=>{var g;return l("div",{class:b.card,draggable:!0,onDragStart:_=>{var m;(m=_.dataTransfer)==null||m.setData("text/plain",f.id),_.target.classList.add(b.dragging)},onDragEnd:_=>{_.target.classList.remove(b.dragging)},onClick:()=>n(f),children:[l("div",{class:b.cardTitle,children:[l("span",{class:`${b.priorityDot} ${Oo(f.priority)}`}),f.title]}),(f.assignee||f.tags&&f.tags.length>0)&&l("div",{class:b.cardMeta,children:[f.assignee&&l("span",{class:b.cardAssignee,style:{background:h(f.assignee)},title:f.assignee,children:f.assignee.charAt(0)}),(g=f.tags)==null?void 0:g.map(_=>l("span",{class:b.cardTag,children:_},_))]})]},f.id)})})]},u))}),l(Bo,{visible:s,task:t,onClose:()=>{At.value=!1}}),e&&l(zo,{task:e,onClose:()=>n(null)})]})}const Uo="_list_1b5ps_1",jo="_card_1b5ps_7",qo="_name_1b5ps_19",Fo="_desc_1b5ps_24",Zo="_tier_1b5ps_30",Se={list:Uo,card:jo,name:qo,desc:Fo,tier:Zo};function Wo({visible:t,personas:e,onSelect:n,onCancel:i}){return l(ut,{visible:t,onClose:i,children:[l("h3",{children:"Choose a Persona"}),l("div",{class:Se.list,children:e.map(r=>l("div",{class:Se.card,onClick:()=>n(r.key),children:[l("div",{class:Se.name,children:r.name}),r.description&&l("div",{class:Se.desc,children:r.description}),r.modelTier&&r.modelTier!=="default"&&l("div",{class:Se.tier,children:["Model: ",r.modelTier]})]},r.key))}),l("button",{class:"btn-secondary",onClick:()=>n(null),children:"No Persona (default)"}),l("button",{class:"btn-text",onClick:i,children:"Cancel"})]})}const Go="_list_1kr7a_1",Vo="_item_1kr7a_7",Ko="_info_1kr7a_16",Jo="_name_1kr7a_21",Qo="_desc_1kr7a_26",Xo="_actions_1kr7a_34",Yo="_empty_1kr7a_41",se={list:Go,item:Vo,info:Ko,name:Jo,desc:Qo,actions:Xo,empty:Yo};function ea({visible:t,onClose:e,onEdit:n}){const i=X.value;async function r(s,c){confirm(`Delete persona "${c}"?`)&&(await Ji(s),await Ot())}return l(ut,{visible:t,onClose:e,wide:!0,children:[l("div",{class:"modal-header",children:[l("h3",{children:"Manage Personas"}),l("button",{class:"btn-text",onClick:e,children:"×"})]}),l("div",{class:se.list,children:[i.map(s=>l("div",{class:se.item,children:[l("div",{class:se.info,children:[l("div",{class:se.name,children:s.name}),l("div",{class:se.desc,children:s.description||s.key})]}),l("div",{class:se.actions,children:[l("button",{class:"btn-text",onClick:()=>{e(),n(s)},children:"Edit"}),l("button",{class:"btn-danger",onClick:()=>r(s.key,s.name),children:"Delete"})]})]},s.key)),i.length===0&&l("div",{class:se.empty,children:"No personas yet. Create one to get started."})]}),l("button",{class:"btn-primary",onClick:()=>{e(),n(null)},children:"+ New Persona"})]})}const ta="_form_14npq_1",na="_labelWithAction_14npq_41",yn={form:ta,labelWithAction:na};function ia({visible:t,persona:e,onClose:n}){const[i,r]=x(""),[s,c]=x(""),[a,d]=x(""),[o,h]=x(""),[u,p]=x(""),[f,g]=x("default"),[_,m]=x(!1),k=ii.value;ne(()=>{t&&(br(),e?(r(e.key),c(e.name),d(e.description||""),h(e.preamble||""),p(e.color||""),g(e.modelTier||"default")):(r(""),c(""),d(""),h(""),p(""),g("default")))},[t,e]);async function y(v){v.preventDefault();const R={key:i,name:s,description:a,preamble:o,modelTier:f,color:u};try{e?await Ki(e.key,R):await Vi(R),await Ot(),n()}catch(P){alert("Error: "+(P instanceof Error?P.message:String(P)))}}async function D(){if(!s.trim()){alert("Enter a persona name first.");return}m(!0);try{const v=await Qi({name:s.trim(),description:a.trim()});v.preamble&&h(v.preamble)}catch(v){alert("Generation failed: "+(v instanceof Error?v.message:String(v)))}finally{m(!1)}}return l(ut,{visible:t,onClose:n,wide:!0,children:[l("h3",{children:e?"Edit Persona":"New Persona"}),l("form",{class:yn.form,onSubmit:y,children:[l("label",{children:["Key (unique ID)",l("input",{type:"text",required:!0,placeholder:"e.g. coder",value:i,disabled:!!e,onInput:v=>r(v.target.value)})]}),l("label",{children:["Name",l("input",{type:"text",required:!0,placeholder:"e.g. Code Assistant",value:s,onInput:v=>c(v.target.value)})]}),l("label",{children:["Description",l("input",{type:"text",placeholder:"Short description",value:a,onInput:v=>d(v.target.value)})]}),l("label",{children:["Color",l("div",{class:"color-swatches",children:xr.map(v=>l("div",{class:`color-swatch${v===u?" selected":""}`,style:{background:v},onClick:()=>p(v)},v))})]}),l("label",{children:[l("span",{class:yn.labelWithAction,children:["System Prompt",l("button",{type:"button",class:"btn-inline",disabled:_,onClick:D,children:_?"Generating...":"Generate"})]}),l("textarea",{rows:5,placeholder:"Custom system prompt...",value:o,onInput:v=>h(v.target.value)})]}),l("label",{children:["Model Tier",l("select",{value:f,onChange:v=>g(v.target.value),children:[!k.includes("default")&&l("option",{value:"default",children:"default"}),k.map(v=>l("option",{value:v,children:v},v))]})]}),l("div",{class:"modal-actions",children:[l("button",{type:"button",class:"btn-secondary",style:{width:"auto"},onClick:n,children:"Cancel"}),l("button",{type:"submit",class:"btn-primary",children:"Save"})]})]})]})}function kn(t){window.innerWidth<=768&&t(!0)}function ra(){const[t,e]=x(window.innerWidth<=768),[n,i]=x(!1),[r,s]=x(!1),[c,a]=x(null),[d,o]=x(!1),h=zt.value;function u(v){const R=sr();Xn({id:R,title:"New Chat",updatedAt:new Date().toISOString(),persona:v}),te({type:"create_session",chatId:R,content:v||""}),F.value=R,Ae(),kn(e)}function p(){X.value.length>0?o(!0):u(null)}function f(v){F.value=v,rr(v),Ae(),te({type:"get_history",chatId:v}),kn(e)}function g(v){fetch(`/api/sessions/${encodeURIComponent(v)}`,{method:"DELETE"}).catch(()=>{}),te({type:"delete_session",chatId:v}),Yn(v),v===F.value&&(L.value.length>0?f(L.value[0].id):(F.value=null,Ae(),p()))}function _(v){a(v),s(!0)}function m(){const v=F.value;if(!v)return;const R="web:"+v;navigator.clipboard.writeText(R).catch(()=>{const P=document.createElement("textarea");P.value=R,P.style.position="fixed",P.style.opacity="0",document.body.appendChild(P),P.select(),document.execCommand("copy"),document.body.removeChild(P)})}function k(){var v;switch(h){case"chats":{const R=F.value,P=R?ti(R):null,z=P?wr(P):null;return l(ae,{children:[z&&l("span",{class:"persona-badge",children:[l("span",{class:"header-avatar",style:{background:z.color||"#888"},children:((v=z.name)==null?void 0:v.charAt(0))||"P"}),l("span",{children:z.name||z.key})]}),R&&l("span",{style:{fontSize:"11px",fontFamily:"monospace",color:"var(--text-secondary)",opacity:.5,cursor:"pointer",userSelect:"none"},title:"Click to copy session key",onClick:m,children:R.slice(0,8)})]})}case"tasks":return l("button",{class:"btn-primary btn-sm",onClick:()=>{At.value=!0},children:"+ New Task"});default:return null}}const y=h==="chats";function D(){switch(h){case"tasks":return l(Ho,{});case"usage":return l(Ys,{});case"chats":default:return l(Bs,{sidebarHidden:t,onNewChat:p,onSwitchChat:f,onDeleteChat:g,onManagePersonas:()=>i(!0)})}}return l(ae,{children:[l(kr,{onToggleSidebar:()=>e(!t),showSidebarToggle:y,children:k()}),l("div",{class:"mainArea",children:D()}),l(Wo,{visible:d,personas:X.value,onSelect:v=>{o(!1),u(v)},onCancel:()=>{o(!1),L.value.length===0&&u(null)}}),l(ea,{visible:n,onClose:()=>i(!1),onEdit:_}),l(ia,{visible:r,persona:c,onClose:()=>s(!1)})]})}ir();or();L.value.length>0&&(F.value=L.value[0].id);Ot();Nt();Pi(l(ra,{}),document.getElementById("app"));</script>
    <style rel="stylesheet" crossorigin>._header_ps8v4_1{display:flex;align-items:center;height:48px;padding:0 16px;border-bottom:1px solid var(--border);background:var(--bg);flex-shrink:0;gap:12px}._hamburger_ps8v4_12{display:block;background:none;border:none;color:var(--text);font-size:20px;cursor:pointer;padding:4px;flex-shrink:0}._brand_ps8v4_23{font-size:16px;font-weight:700;flex-shrink:0;margin-right:8px}._nav_ps8v4_30{display:flex;gap:2px;flex:1}._navTab_ps8v4_36{padding:6px 14px;background:none;border:none;border-bottom:2px solid transparent;color:var(--text-secondary);font-size:13px;font-weight:500;font-family:inherit;cursor:pointer;transition:color .15s,border-color .15s}._navTab_ps8v4_36:hover{color:var(--text)}._navTabActive_ps8v4_55{color:var(--accent);border-bottom-color:var(--accent)}._actions_ps8v4_61{display:flex;align-items:center;gap:8px}@media(max-width:768px){._brand_ps8v4_23{display:none}}._sidebar_1v6to_1{width:260px;flex-shrink:0;background:var(--sidebar-bg);border-right:1px solid var(--border);display:flex;flex-direction:column;height:100%;overflow:hidden}._header_1v6to_12{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--border);flex-shrink:0}._title_1v6to_21{font-size:16px;font-weight:600}._actions_1v6to_26{display:flex;gap:4px}._iconBtn_1v6to_31{width:32px;height:32px;border:1px solid var(--border);border-radius:6px;background:var(--bg);color:var(--text-secondary);font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center}._iconBtn_1v6to_31:hover{background:var(--bg-tertiary);color:var(--text)}._newChatBtn_1v6to_50{color:var(--text);font-size:18px}._sessionList_1v6to_56{flex:1;overflow-y:auto;padding:8px}._sessionItem_1v6to_62{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:6px;cursor:pointer;margin-bottom:2px;overflow:hidden;position:relative}._sessionItem_1v6to_62:hover{background:var(--sidebar-hover)}._sessionItem_1v6to_62._active_1v6to_78{background:var(--sidebar-active)}._avatar_1v6to_82{width:28px;height:28px;border-radius:50%;flex-shrink:0;display:flex;align-items:center;justify-content:center;color:#fff;font-size:13px;font-weight:600;text-transform:uppercase}._content_1v6to_96{flex:1;min-width:0}._title_1v6to_21{font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;align-items:center;gap:8px}._unreadDot_1v6to_111{width:8px;height:8px;border-radius:50%;background:var(--accent);flex-shrink:0}._time_1v6to_119{font-size:11px;color:var(--text-secondary);margin-top:2px}._deleteBtn_1v6to_125{display:none;position:absolute;right:8px;top:50%;transform:translateY(-50%);background:var(--bg-secondary);border:1px solid var(--border);border-radius:4px;color:var(--text-secondary);font-size:12px;width:20px;height:20px;cursor:pointer;align-items:center;justify-content:center;padding:0;line-height:1}._deleteBtn_1v6to_125:hover{color:var(--status-disconnected);border-color:var(--status-disconnected)}._sessionItem_1v6to_62:hover ._deleteBtn_1v6to_125{display:flex}._form_572ba_1{display:flex;gap:8px;padding:12px 16px;border-top:1px solid var(--border);background:var(--bg);flex-shrink:0}._input_572ba_10{flex:1;padding:10px 14px;border:1px solid var(--border);border-radius:8px;background:var(--bg-secondary);color:var(--text);font-family:inherit;font-size:16px;resize:none;max-height:120px;outline:none}._input_572ba_10:focus{border-color:var(--accent)}._sendBtn_572ba_28{padding:10px 20px;background:var(--accent);color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;flex-shrink:0}._sendBtn_572ba_28:hover{opacity:.9}._chatArea_850fi_1{flex:1;display:flex;flex-direction:column;height:100%;min-width:0}._chatBody_850fi_9{flex:1;display:flex;flex-direction:row;min-height:0}._chatMain_850fi_16{flex:1;display:flex;flex-direction:column;min-width:0;position:relative}._scrollBtn_850fi_24{position:absolute;bottom:80px;right:24px;width:36px;height:36px;border-radius:50%;border:1px solid var(--border);background:var(--bg-secondary);color:var(--text);font-size:18px;cursor:pointer;opacity:.7;z-index:10}._scrollBtn_850fi_24:hover{opacity:1}._view_jyvol_1{flex:1;display:flex;flex-direction:column;height:100%;min-width:0}._content_jyvol_9{flex:1;overflow-y:auto;padding:16px 24px}._content_jyvol_9 h3{font-size:15px;font-weight:600;margin:20px 0 10px}._content_jyvol_9 h3:first-of-type{margin-top:16px}._filters_jyvol_25{display:flex;flex-wrap:wrap;gap:10px;align-items:flex-end}._filters_jyvol_25 label{display:flex;flex-direction:column;gap:3px;font-size:12px;color:var(--text-secondary)}._filters_jyvol_25 input,._filters_jyvol_25 select{padding:6px 8px;border:1px solid var(--border);border-radius:6px;background:var(--bg-secondary);color:var(--text);font-family:inherit;font-size:13px;outline:none;min-width:120px}._filters_jyvol_25 input:focus,._filters_jyvol_25 select:focus{border-color:var(--accent)}._summaryCards_jyvol_58{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-top:16px}._card_jyvol_65{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:14px 16px;text-align:center}._cardLabel_jyvol_73{font-size:12px;color:var(--text-secondary);margin-bottom:4px}._cardValue_jyvol_79{font-size:22px;font-weight:700;color:var(--text)}._tableWrap_jyvol_85{overflow-x:auto}._table_jyvol_85{width:100%;border-collapse:collapse;font-size:13px}._table_jyvol_85 th,._table_jyvol_85 td{padding:8px 12px;border:1px solid var(--border);text-align:left}._table_jyvol_85 th{background:var(--bg-tertiary);font-weight:600;-webkit-user-select:none;user-select:none;white-space:nowrap;cursor:pointer}._table_jyvol_85 th:hover{background:var(--border)}._table_jyvol_85 td:not(:first-child){text-align:right;font-variant-numeric:tabular-nums}._table_jyvol_85 tr:nth-child(2n){background:color-mix(in srgb,var(--bg-tertiary) 40%,transparent)}._table_jyvol_85 tr:hover{background:color-mix(in srgb,var(--accent) 8%,transparent)}._sortAsc_jyvol_127:after{content:" ▲";font-size:10px}._sortDesc_jyvol_132:after{content:" ▼";font-size:10px}._noData_jyvol_137{text-align:center;color:var(--text-secondary);padding:12px}@media(max-width:768px){._content_jyvol_9{padding:12px}._filters_jyvol_25{flex-direction:column;align-items:stretch}._filters_jyvol_25 label{width:100%}._filters_jyvol_25 input,._filters_jyvol_25 select{width:100%;min-width:0}._summaryCards_jyvol_58{grid-template-columns:repeat(2,1fr)}}._view_sylgi_1{flex:1;display:flex;flex-direction:column;height:100%;min-width:0}._board_sylgi_9{flex:1;display:flex;gap:12px;padding:16px;overflow-x:auto;align-items:flex-start}._column_sylgi_18{flex:1;min-width:220px;max-width:320px;background:var(--bg-secondary);border:1px solid var(--border);border-radius:10px;display:flex;flex-direction:column;max-height:calc(100vh - 90px)}._columnHeader_sylgi_30{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;border-bottom:1px solid var(--border);flex-shrink:0}._columnTitle_sylgi_39{font-size:13px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary)}._columnCount_sylgi_47{font-size:11px;font-weight:600;background:var(--bg-tertiary);color:var(--text-secondary);padding:2px 7px;border-radius:10px}._cards_sylgi_56{flex:1;overflow-y:auto;padding:8px;display:flex;flex-direction:column;gap:6px;min-height:40px}._dragOver_sylgi_66{background:color-mix(in srgb,var(--accent) 8%,transparent);border-radius:0 0 10px 10px}._card_sylgi_56{background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:10px 12px;cursor:pointer;transition:box-shadow .15s,border-color .15s;-webkit-user-select:none;user-select:none}._card_sylgi_56:hover{border-color:var(--accent);box-shadow:0 2px 8px #00000014}._dragging_sylgi_88{opacity:.4}._cardTitle_sylgi_92{font-size:13px;font-weight:500;margin-bottom:6px;display:flex;align-items:center;gap:6px}._priorityDot_sylgi_101{width:8px;height:8px;border-radius:50%;flex-shrink:0}._priorityLow_sylgi_108{background:#94a3b8}._priorityMedium_sylgi_111{background:#3b82f6}._priorityHigh_sylgi_114{background:#f59e0b}._priorityUrgent_sylgi_117{background:#ef4444}._cardMeta_sylgi_121{display:flex;align-items:center;gap:6px;flex-wrap:wrap}._cardAssignee_sylgi_128{font-size:11px;font-weight:600;width:20px;height:20px;border-radius:50%;background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;text-transform:uppercase}._cardTag_sylgi_142{font-size:10px;padding:1px 6px;background:var(--bg-tertiary);color:var(--text-secondary);border-radius:4px}._detailContent_sylgi_152{background:var(--bg);border:1px solid var(--border);border-radius:12px;max-width:1100px;width:95vw;max-height:90vh;display:flex;flex-direction:column;padding:0;overflow:hidden}._detailHeader_sylgi_165{display:flex;align-items:center;gap:8px;padding:16px 20px 8px;border-bottom:1px solid var(--border)}._detailTitleInput_sylgi_173{flex:1;font-size:18px;font-weight:600;border:none;background:transparent;color:var(--text);outline:none;padding:4px 0}._detailTitleInput_sylgi_173::placeholder{color:var(--text-secondary)}._detailId_sylgi_188{font-size:11px;font-family:monospace;color:var(--text-secondary);flex-shrink:0;opacity:.7;cursor:pointer;-webkit-user-select:none;user-select:none}._detailId_sylgi_188:hover{opacity:1}._detailBody_sylgi_202{display:flex;flex:1;overflow:hidden}._detailLeft_sylgi_208{width:300px;flex-shrink:0;overflow-y:auto;border-right:1px solid var(--border);display:flex;flex-direction:column}._detailRight_sylgi_217{flex:1;display:flex;flex-direction:column;min-width:0;min-height:0;overflow:hidden}._detailMeta_sylgi_226{display:flex;flex-wrap:wrap;gap:8px;padding:10px 16px;border-bottom:1px solid var(--border)}._detailMeta_sylgi_226 label{display:flex;flex-direction:column;gap:2px;font-size:11px;color:var(--text-secondary);flex:1 1 calc(50% - 4px);min-width:100px}._detailMeta_sylgi_226 select,._detailMeta_sylgi_226 input{padding:4px 8px;border:1px solid var(--border);border-radius:4px;background:var(--bg-secondary);color:var(--text);font-size:13px;outline:none}._detailMeta_sylgi_226 select:focus,._detailMeta_sylgi_226 input:focus{border-color:var(--accent)}._sectionLabel_sylgi_260{padding:8px 16px 4px;font-size:11px;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}._description_sylgi_268{padding:12px 20px;font-size:13px;color:var(--text-secondary);flex:1;overflow-y:auto;cursor:pointer;min-height:80px;line-height:1.5}._description_sylgi_268 ul,._description_sylgi_268 ol{padding-left:1.5em}._description_sylgi_268:hover{background:var(--bg-secondary)}._descriptionPlaceholder_sylgi_288{color:var(--text-secondary);font-style:italic;opacity:.6}._descriptionEdit_sylgi_294{padding:12px 20px;font-size:13px;color:var(--text);flex:1;min-height:80px;font-family:inherit;line-height:1.5;border:none;outline:none;background:var(--bg-secondary);resize:none;width:100%;box-sizing:border-box}._taskMessages_sylgi_310{flex:1;overflow-y:auto;padding:12px 20px;display:flex;flex-direction:column;gap:8px;min-height:200px}._taskMessages_sylgi_310 ._message_sylgi_320{max-width:90%}._taskMessagesEmpty_sylgi_324{color:var(--text-secondary);font-size:13px;text-align:center;padding:40px 0}._taskInputForm_sylgi_331{display:flex;gap:8px;padding:10px 20px 16px;border-top:1px solid var(--border)}._taskInputForm_sylgi_331 textarea{flex:1;padding:8px 12px;border:1px solid var(--border);border-radius:8px;background:var(--bg-secondary);color:var(--text);font-family:inherit;font-size:14px;resize:none;outline:none;max-height:120px}._taskInputForm_sylgi_331 textarea:focus{border-color:var(--accent)}._taskInputForm_sylgi_331 button{padding:8px 16px;background:var(--accent);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:14px;align-self:flex-end}._taskInputForm_sylgi_331 button:hover{opacity:.9}._editorForm_sylgi_372{display:flex;flex-direction:column;gap:12px}._editorForm_sylgi_372 label{display:flex;flex-direction:column;gap:4px;font-size:13px;color:var(--text-secondary)}._editorForm_sylgi_372 input,._editorForm_sylgi_372 textarea,._editorForm_sylgi_372 select{padding:8px 10px;border:1px solid var(--border);border-radius:6px;background:var(--bg-secondary);color:var(--text);font-family:inherit;font-size:14px;outline:none}._editorForm_sylgi_372 input:focus,._editorForm_sylgi_372 textarea:focus,._editorForm_sylgi_372 select:focus{border-color:var(--accent)}._editorForm_sylgi_372 textarea{resize:vertical;min-height:60px}@media(max-width:768px){._board_sylgi_9{padding:8px;gap:8px}._column_sylgi_18{min-width:200px}}@media(max-width:600px){._detailBody_sylgi_202{flex-direction:column}._detailLeft_sylgi_208{width:100%;border-right:none;border-bottom:1px solid var(--border);max-height:40vh;overflow-y:auto}._taskMessages_sylgi_310{min-height:0}}._list_1b5ps_1{display:flex;flex-direction:column;gap:8px}._card_1b5ps_7{padding:10px 12px;border:1px solid var(--border);border-radius:8px;cursor:pointer;transition:border-color .15s}._card_1b5ps_7:hover{border-color:var(--accent)}._name_1b5ps_19{font-size:14px;font-weight:500}._desc_1b5ps_24{font-size:12px;color:var(--text-secondary);margin-top:2px}._tier_1b5ps_30{font-size:11px;color:var(--text-secondary);margin-top:4px;font-style:italic}._list_1kr7a_1{display:flex;flex-direction:column;gap:6px}._item_1kr7a_7{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;border:1px solid var(--border);border-radius:6px}._info_1kr7a_16{flex:1;min-width:0}._name_1kr7a_21{font-size:14px;font-weight:500}._desc_1kr7a_26{font-size:12px;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}._actions_1kr7a_34{display:flex;gap:4px;flex-shrink:0;margin-left:8px}._empty_1kr7a_41{text-align:center;color:var(--text-secondary);font-size:13px;padding:16px 0}._form_14npq_1{display:flex;flex-direction:column;gap:12px}._form_14npq_1 label{display:flex;flex-direction:column;gap:4px;font-size:13px;color:var(--text-secondary)}._form_14npq_1 input,._form_14npq_1 textarea,._form_14npq_1 select{padding:8px 10px;border:1px solid var(--border);border-radius:6px;background:var(--bg-secondary);color:var(--text);font-family:inherit;font-size:14px;outline:none}._form_14npq_1 input:focus,._form_14npq_1 textarea:focus,._form_14npq_1 select:focus{border-color:var(--accent)}._form_14npq_1 textarea{resize:vertical;min-height:80px;font-family:SF Mono,Fira Code,Cascadia Code,monospace;font-size:13px}._labelWithAction_14npq_41{display:flex;align-items:center;justify-content:space-between}:root{--bg: #ffffff;--bg-secondary: #f5f5f5;--bg-tertiary: #ebebeb;--text: #1a1a1a;--text-secondary: #666666;--border: #e0e0e0;--user-bg: #0066cc;--user-text: #ffffff;--assistant-bg: #f0f0f0;--assistant-text: #1a1a1a;--code-bg: #f5f5f5;--code-border: #ddd;--accent: #0066cc;--status-connected: #22c55e;--status-disconnected: #ef4444;--status-reconnecting: #f59e0b;--sidebar-bg: #f8f8f8;--sidebar-active: #e8e8e8;--sidebar-hover: #f0f0f0}@media(prefers-color-scheme:dark){:root{--bg: #1a1a1a;--bg-secondary: #2a2a2a;--bg-tertiary: #333333;--text: #e0e0e0;--text-secondary: #999999;--border: #333333;--user-bg: #0066cc;--user-text: #ffffff;--assistant-bg: #2a2a2a;--assistant-text: #e0e0e0;--code-bg: #333333;--code-border: #444;--accent: #4d94ff;--sidebar-bg: #222222;--sidebar-active: #333333;--sidebar-hover: #2a2a2a}}*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:var(--bg);color:var(--text);height:100dvh;overflow:hidden}#app{display:flex;flex-direction:column;height:100dvh}.mainArea{display:flex;flex-direction:row;flex:1;min-height:0}.modal{position:fixed;top:0;right:0;bottom:0;left:0;z-index:200;display:flex;align-items:center;justify-content:center;background:#0006}.modal.hidden{display:none}.modal-content{background:var(--bg);border:1px solid var(--border);border-radius:12px;padding:24px;max-width:420px;width:90%;max-height:80vh;overflow-y:auto;display:flex;flex-direction:column;gap:12px}.modal-content.modal-wide{max-width:520px}.modal-content h3{font-size:16px;font-weight:600}.modal-header{display:flex;align-items:center;justify-content:space-between}.modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:4px}.btn-primary{padding:8px 16px;background:var(--accent);color:#fff;border:none;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer}.btn-primary:hover{opacity:.9}.btn-secondary{padding:8px 16px;background:var(--bg-secondary);color:var(--text);border:1px solid var(--border);border-radius:6px;font-size:13px;cursor:pointer;width:100%}.btn-secondary:hover{background:var(--bg-tertiary)}.btn-text{background:none;border:none;color:var(--text-secondary);font-size:14px;cursor:pointer;padding:4px 8px}.btn-text:hover{color:var(--text)}.btn-danger{background:none;border:none;color:var(--status-disconnected);font-size:12px;cursor:pointer;padding:2px 6px}.btn-danger:hover{text-decoration:underline}.btn-sm{font-size:12px;padding:4px 8px}.btn-inline{background:none;border:none;color:var(--accent);cursor:pointer;font-size:12px;padding:0}.btn-inline:hover{text-decoration:underline}.hidden{display:none!important}.message ul,.message ol{padding-left:1.5em}.message{max-width:80%;padding:10px 14px;border-radius:12px;line-height:1.5;font-size:14px;word-wrap:break-word;overflow-wrap:break-word}.message.user{align-self:flex-end;background:var(--user-bg);color:var(--user-text);border-bottom-right-radius:4px}.message.assistant{align-self:flex-start;background:var(--assistant-bg);color:var(--assistant-text);border-bottom-left-radius:4px}.message.system{align-self:center;background:transparent;color:var(--text-secondary);font-size:12px;font-style:italic}.thinking{display:flex;gap:4px;padding:8px 14px;align-self:flex-start}.thinking span{width:8px;height:8px;border-radius:50%;background:var(--text-secondary);animation:pulse 1.4s infinite ease-in-out}.thinking span:nth-child(2){animation-delay:.2s}.thinking span:nth-child(3){animation-delay:.4s}@keyframes pulse{0%,80%,to{opacity:.3;transform:scale(.8)}40%{opacity:1;transform:scale(1)}}.status{font-size:12px;padding:2px 8px;border-radius:10px;font-weight:500;flex-shrink:0}.status.connected{color:var(--status-connected)}.status.disconnected{color:var(--status-disconnected)}.status.reconnecting{color:var(--status-reconnecting)}.persona-badge{font-size:11px;color:var(--accent);font-weight:500;padding:1px 6px;background:color-mix(in srgb,var(--accent) 10%,transparent);border-radius:4px;display:inline-flex;align-items:center;gap:4px}.header-avatar{width:18px;height:18px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;color:#fff;font-size:10px;font-weight:600;text-transform:uppercase;flex-shrink:0}.color-swatches{display:flex;flex-wrap:wrap;gap:6px;margin-top:4px}.color-swatch{width:24px;height:24px;border-radius:50%;cursor:pointer;border:2px solid transparent;transition:border-color .15s}.color-swatch:hover{border-color:var(--text-secondary)}.color-swatch.selected{border-color:var(--text);box-shadow:0 0 0 2px var(--bg)}.dropdown{position:absolute;left:0;top:calc(100% + 4px);background:var(--bg);border:1px solid var(--border);border-radius:8px;box-shadow:0 4px 12px #00000026;min-width:140px;z-index:50;padding:4px 0}.dropdown-item{display:block;width:100%;padding:8px 14px;background:none;border:none;color:var(--text);font-size:13px;text-align:left;cursor:pointer;font-family:inherit}.dropdown-item:hover{background:var(--sidebar-hover)}.dropdown-item.active{color:var(--accent);font-weight:600}@media(max-width:768px){.sidebar{position:fixed;left:0;top:0;bottom:0;z-index:100;transform:translate(0);transition:transform .2s ease}.sidebar-hidden .sidebar{transform:translate(-100%)}.sidebar-toggle-btn{display:block!important}.sidebar-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#0000004d;z-index:99}}.message.assistant p{margin-bottom:8px}.message.assistant p:last-child{margin-bottom:0}.message.assistant code{background:var(--code-bg);padding:2px 5px;border-radius:3px;font-family:SF Mono,Fira Code,Cascadia Code,monospace;font-size:13px}.message.assistant pre{background:var(--code-bg);border:1px solid var(--code-border);border-radius:6px;padding:10px;margin:8px 0;overflow-x:auto;font-size:13px}.message.assistant pre code{background:none;padding:0;font-size:inherit}.message.assistant ul,.message.assistant ol{margin:4px 0;padding-left:20px}.message.assistant a{color:var(--accent);text-decoration:underline}.message.assistant blockquote{border-left:3px solid var(--border);padding-left:10px;margin:4px 0;color:var(--text-secondary)}.message.assistant table{border-collapse:collapse;margin:8px 0;font-size:13px;width:100%}.message.assistant th,.message.assistant td{border:1px solid var(--border);padding:6px 10px}.message.assistant th{background:var(--bg-tertiary);font-weight:600}.message.assistant tr:nth-child(2n){background:color-mix(in srgb,var(--bg-tertiary) 40%,transparent)}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
